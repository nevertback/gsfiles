!function(e){e.fn.gsPopup=function(t){function i(t,i){var s;switch(i){case"video_tgs":return s='<embed wmode="direct" flashvars="vid='+t+'&amp;tpid=0&amp;showend=1&amp;showcfg=1&amp;searchbar=1&amp;skin=http://imgcache.qq.com/minivideo_v1/vd/res/skins/TencentPlayerMiniSkin.swf&amp;shownext=1&amp;list=2&amp;autoplay=1" src="http://imgcache.qq.com/tencentvideo_v1/player/TPout.swf?max_age=86400&amp;v=20140714" quality="high" name="tenvideo_flash_player_1492679771297" id="tenvideo_flash_player_1492679771297" bgcolor="#000000" width="100%" height="100%" align="middle" allowscriptaccess="always" allowfullscreen="true" type="application/x-shockwave-flash" pluginspage="http://get.adobe.com/cn/flashplayer/">';case"video_tgs2":return s='<div id="tgsVideo"></div>';case"video_yk":return s='<embed height="100%" flashvars="isAutoPlay=true" allowscriptaccess="sameDomain" width="100%" align="middle" quality="high" invokeurls="false" src="http://player.youku.com/player.php/sid/'+t+'/v.swf" type="application/x-shockwave-flash" wmode="transparent">';case"video_bl":return s='<iframe height="100%" width="100%" id="vedioSrc" frameborder="0" allowfullscreen src="'+t+'"></iframe>';case"video_other":return s=t;case"pics":return s='<img src="'+t+'" alt="popimgs" width="100%" height="100%">';case"custom":return s=e(t).html()}}function s(t){var s="";s+='<div id="gsPopupMask" class="gsPopupMask"></div>',s+='<div id="gsPopup" class="gsPopup" style="',s+=t.style,s+='"><div class="gsPopupCon">',s+=i(t.sid,t.sty),s+='</div><a  class="gsPopupClose" id="gsPopupClose"></a></div>',e("body").append(s),p=setTimeout(function(){e("#gsPopupMask").addClass("cur"),e("#gsPopup").addClass("cur")},10),"video_tgs2"===t.sty&&e.getScript("http://vm.gtimg.cn/tencentvideo/txp/js/txplayer.js",function(){new Txplayer({containerId:"tgsVideo",vid:t.sid,width:"100%",height:t.height,autoplay:!0,showBullet:!1,showLogo:!1,showRecommendOnEnd:!1});e("#tgsVideo").closest(".gsPopupCon").css("overflow","hidden")})}function a(){clearTimeout(p),e("#gsPopupMask").removeClass("cur"),e("#gsPopup").removeClass("cur"),n=setTimeout(function(){e("#gsPopupMask").remove(),e("#gsPopup").hide().remove()},150)}function o(){e("#gsPopupClose").on("click",a),e("#gsPopupMask").on("click",a)}var n,p,r={afterOpen:""},c=e.extend(r,t),d=e(this);d.on("click",function(){clearTimeout(n);var t,i=e(this),a=i.data("w"),p=i.data("h"),r=i.data("diy"),d=e(window).height(),l={pos:"fixed",width:a,height:p,sid:i.data("sid"),sty:i.data("sty"),diy:r};t="width:"+l.width+"px;height:"+l.height+"px;",l.style="position:"+l.pos+";top:50%;left:50%;margin-left:-"+l.width/2+"px;margin-top:-"+l.height/2+"px;"+t,p>d&&(l.pos="absolute",l.style="position:"+l.pos+";top:"+i.offset().top+"px;left:50%;margin-left:-"+l.width/2+"px;"+t),s(l),o(),"function"==typeof c.afterOpen&&c.afterOpen()})}}(jQuery),$(".popupBtn").gsPopup(),function(e){var t=!1,i=!1,s=27,a=[{pid:301,pnm:"雷蛇萨诺键盘"},{pid:540,pnm:"守望手机壳"},{pid:0,pnm:"谢谢参与"},{pid:302,pnm:"太攀皇蛇钻石星辰版游戏鼠标"},{pid:0,pnm:"谢谢参与"},{pid:542,pnm:"温斯顿小手办"},{pid:543,pnm:"战网点1000点"},{pid:0,pnm:"谢谢参与"}],o=!1,n={repeat:"同一用户有1次抽奖机会哟~"},p={draw:function(){var p,r,c=e("#drawSel"),d=e("#drawBegin"),l="draw-select",u=0,h=500,m=3,f=3,g={buildAlert:function(e){return"恭喜您获得"+e+"请关注站内通知"},alertRepeat:function(){alert(n.repeat)},setSelBox:function(e){c.removeClass().addClass(l+" "+l+e)},endAnim:function(){var e=this;e.setAnim(u),setTimeout(function(){e.setSelBox(u),o&&alert(o)},h*m+1e3)},cirAnim:function(){var e=this,t=0;p=setInterval(function(){t++,t>7&&(t=0),e.setSelBox(t)},h/8)},setAnim:function(e){var t=this,i=0;r=setInterval(function(){i++,i<=e&&t.setSelBox(i)},h*m/8)},anim:function(){function e(){s--,t=setTimeout(function(){s>0?e():(clearInterval(p),clearTimeout(t),i.endAnim())},h)}var t,i=this,s=f;i.cirAnim(),e()},start:function(e){u=e,this.anim()},isLogin:function(){return"undefined"!=typeof e.cookie("UserCookie")||(e(".QZshade,.QZlogin").show(),!1)},getOl:function(i){var n=e.parseJSON(e.cookie("UserCookie")),p=this,r={url:"http://db5.gamersky.com/LotteryAjax.aspx",data:{jsondata:JSON2.stringify({action:"sweepstakes",userId:n.userid,lotteryId:s})}};e.ajax({type:"GET",url:r.url,dataType:"jsonp",data:r.data,success:function(s){if(t=!0,console.log(s),"ok"===s.status){var n=s.result[0],r=n.prizeId;o=p.buildAlert(n.prizeName),e.each(a,function(e,t){t.pid===r&&i(e)})}else if(null!==s.result.match("同一用户只能抽")&&"object"==typeof s.result.match("同一用户只能抽"))p.alertRepeat();else{var c=[];e.each(a,function(e,t){0===t.pid&&c.push(e)});var d=Math.round(Math.random()*(c.length-1));i(c[d])}}})},bindClick:function(){var e=this;d.on("click",function(){i=e.isLogin(),i===!0&&(t===!1?e.getOl(function(t){e.start(t)}):e.alertRepeat())})},init:function(){this.setSelBox(u),this.bindClick()}};g.init()},init:function(){this.draw()}};p.init()}(jQuery);
//# sourceMappingURL=main.min.js.map
