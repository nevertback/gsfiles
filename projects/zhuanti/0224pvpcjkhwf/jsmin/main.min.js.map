{"version":3,"sources":["main.js"],"names":["$","fn","gsPopup","options","addSource","sid","sty","sourceDom","html","addPopup","opts","popupDom","style","append","inTimer","setTimeout","addClass","getScript","Txplayer","containerId","vid","width","height","autoplay","showBullet","showLogo","showRecommendOnEnd","closest","css","removePopup","clearTimeout","removeClass","outTimer","remove","hide","closePopup","on","defaults","afterOpen","optionsEd","extend","btn","this","gerCss","$this","dw","data","dh","diysty","wh","window","popupOptions","pos","diy","offset","top","jQuery","ymjsModel","ztSld","tar","$sldwrap","$sldPrev","find","$sldNext","$sld","$sldCon","$sldNav","slide","mainCell","effect","delayTime","prevCell","nextCell","switchLoad","titCell","autoPage","titOnClassName","vote","getVoteData","ajax","type","dataType","url","json","id","voteId","success","responseJson","status","each","items","i","item","vsid","Id","vsnum","TotalNumber","itTar","alert","message","smtVote","num","error","XMLHttpRequest","textStatus","errorThrown","$list","isClk","attr","fixCode","scrollFunc","$win","st","scrollTop","fxCode","show","ft","resize","scroll"],"mappings":"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","file":"main.min.js","sourcesContent":["(function($){\r\n    $.fn.gsPopup = function(options){\r\n        var defaults = {\r\n        \t//弹出后回调函数\r\n        \tafterOpen:''\r\n\t\t};\r\n        var optionsEd = $.extend(defaults,options);\r\n        var btn = $(this),outTimer,inTimer;\r\n        function addSource(sid,sty) {\r\n            var sourceDom;\r\n            switch (sty) {\r\n                case 'video_tgs':\r\n                    sourceDom = '<embed wmode=\"direct\" flashvars=\"vid=' + sid + '&amp;tpid=0&amp;showend=1&amp;showcfg=1&amp;searchbar=1&amp;skin=http://imgcache.qq.com/minivideo_v1/vd/res/skins/TencentPlayerMiniSkin.swf&amp;shownext=1&amp;list=2&amp;autoplay=1\" src=\"http://imgcache.qq.com/tencentvideo_v1/player/TPout.swf?max_age=86400&amp;v=20140714\" quality=\"high\" name=\"tenvideo_flash_player_1492679771297\" id=\"tenvideo_flash_player_1492679771297\" bgcolor=\"#000000\" width=\"100%\" height=\"100%\" align=\"middle\" allowscriptaccess=\"always\" allowfullscreen=\"true\" type=\"application/x-shockwave-flash\" pluginspage=\"http://get.adobe.com/cn/flashplayer/\">';\r\n                    return sourceDom;\r\n                    break;\r\n                case 'video_tgs2':\r\n                    sourceDom = '<div id=\"tgsVideo\"></div>';\r\n                    return sourceDom;\r\n                    break;\r\n                case 'video_yk':\r\n                    sourceDom = '<embed height=\"100%\" flashvars=\"isAutoPlay=true\" allowscriptaccess=\"sameDomain\" width=\"100%\" align=\"middle\" quality=\"high\" invokeurls=\"false\" src=\"http://player.youku.com/player.php/sid/'+sid+'/v.swf\" type=\"application/x-shockwave-flash\" wmode=\"transparent\">';\r\n                    return sourceDom;\r\n                    break;\r\n                case 'video_bl':\r\n                    sourceDom = '<iframe height=\"100%\" width=\"100%\" id=\"vedioSrc\" frameborder=\"0\" allowfullscreen src=\"'+sid+'\"></iframe>';\r\n                    return sourceDom;\r\n                    break;\r\n                case 'video_other':\r\n                    sourceDom = sid;\r\n                    return sourceDom;\r\n                    break;\r\n                case 'pics':\r\n                    sourceDom = '<img src=\"'+sid+'\" alt=\"popimgs\" width=\"100%\" height=\"100%\">';\r\n                    return sourceDom;\r\n                    break;\r\n                case 'custom':\r\n                    sourceDom = $(sid).html();\r\n                    return sourceDom;\r\n                    break;\r\n            }\r\n        }\r\n        function addPopup(opts) {\r\n            var popupDom = '';\r\n            popupDom += '<div id=\"gsPopupMask\" class=\"gsPopupMask\"></div>';\r\n            popupDom += '<div id=\"gsPopup\" class=\"gsPopup\" style=\"';\r\n            popupDom += opts.style;\r\n            popupDom += '\"><div class=\"gsPopupCon\">';\r\n            popupDom += addSource(opts.sid,opts.sty);\r\n            popupDom += '</div><a  class=\"gsPopupClose\" id=\"gsPopupClose\"></a></div>';\r\n            $('body').append(popupDom);\r\n            inTimer = setTimeout(function () {\r\n                $('#gsPopupMask').addClass('cur');\r\n                $('#gsPopup').addClass('cur');\r\n            },10);\r\n            if(opts.sty === 'video_tgs2'){\r\n                $.getScript(\"http://vm.gtimg.cn/tencentvideo/txp/js/txplayer.js\",function(){\r\n                    var player = new Txplayer({\r\n                        containerId: 'tgsVideo',\r\n                        vid: opts.sid,\r\n                        width: '100%',\r\n                        height: opts.height,\r\n                        autoplay:true,\r\n                        showBullet:false,\r\n                        showLogo: false,\r\n                        showRecommendOnEnd:false\r\n                    });\r\n                    $('#tgsVideo').closest('.gsPopupCon').css('overflow','hidden');\r\n                });\r\n            }\r\n        }\r\n        function removePopup() {\r\n        \tclearTimeout(inTimer);\r\n            $('#gsPopupMask').removeClass('cur');\r\n            $('#gsPopup').removeClass('cur');\r\n            outTimer = setTimeout(function () {\r\n                $('#gsPopupMask').remove();\r\n                $('#gsPopup').hide().remove();\r\n            },150);\r\n        }\r\n        function closePopup() {\r\n            $('#gsPopupClose').on('click',removePopup);\r\n            $('#gsPopupMask').on('click',removePopup);\r\n        }\r\n        btn.on('click',function () {\r\n            clearTimeout(outTimer);\r\n            var $this = $(this),dw = $this.data('w'),dh = $this.data('h'),diysty=$this.data('diy'),\r\n                wh = $(window).height(),gerCss,\r\n                popupOptions = {\r\n                    pos:'fixed',\r\n                    width:dw,\r\n                    height:dh,\r\n                    sid:$this.data('sid'),\r\n                    sty:$this.data('sty'),\r\n                    diy:diysty\r\n                };\r\n            gerCss = 'width:'+popupOptions.width+'px;height:'+popupOptions.height+'px;';\r\n            popupOptions.style = 'position:'+popupOptions.pos+';top:50%;left:50%;margin-left:-'+popupOptions.width/2+'px;margin-top:-'+popupOptions.height/2+'px;'+gerCss;\r\n            if(dh>wh){\r\n                popupOptions.pos = 'absolute';\r\n                popupOptions.style = 'position:'+popupOptions.pos+';top:'+$this.offset().top+'px;left:50%;margin-left:-'+popupOptions.width/2+'px;'+gerCss;\r\n            }\r\n            addPopup(popupOptions);\r\n            closePopup();\r\n            if(typeof optionsEd.afterOpen === 'function'){\r\n                optionsEd.afterOpen();\r\n\t\t\t}\r\n        });\r\n    }\r\n})(jQuery);\r\n$('.popupBtn').gsPopup();\r\n(function ($) {\r\n\tvar ymjsModel = {\r\n        ztSld:function(tar){\r\n            var $sldwrap = $(tar),\r\n                $sldPrev = $sldwrap.find('.arrBtnL'),\r\n                $sldNext = $sldwrap.find('.arrBtnR'),\r\n                $sld = $sldwrap.find('.ztSld'),\r\n                $sldCon = $sld.find('.ztSldCon'),\r\n                $sldNav = $sld.find('.ztSldNav');\r\n\r\n            $sld.slide({\r\n                mainCell:$sldCon,\r\n                effect:'leftLoop',\r\n                delayTime:250,\r\n                prevCell:$sldPrev,\r\n                nextCell:$sldNext,\r\n                switchLoad:'data-src',\r\n                titCell:$sldNav,\r\n                autoPage:'<li></li>',\r\n                titOnClassName:'cur'\r\n            });\r\n        },\r\n        vote:function () {\r\n            var $list = $('.voteList'),voteId = $list.data('voteid');\r\n            function getVoteData() {\r\n                $.ajax({\r\n                    type: \"GET\",\r\n                    dataType: \"jsonp\",\r\n                    url: \"http://db2.gamersky.com/Vote/ShowVote.aspx\",\r\n                    data: {\r\n                        json: \"1\",\r\n                        id: voteId\r\n                    },\r\n                    success: function(responseJson) {\r\n                        switch (responseJson.status) {\r\n                            case \"ok\":\r\n                                $.each(responseJson.items,function (i,item) {\r\n                                    var vsid = item.Id,vsnum = item.TotalNumber,\r\n                                        itTar = $('.voteItem[data-vid='+vsid+']');\r\n                                    itTar.find('.nums').html(vsnum);\r\n                                });\r\n                                break;\r\n                            case \"err\":\r\n                                alert(responseJson.message);\r\n                                break;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            function smtVote(vid,tar,num) {\r\n                $.ajax({\r\n                    type: \"GET\",\r\n                    dataType: \"jsonp\",\r\n                    url: \"http://db5.gamersky.com/Vote/ShowVote.aspx\",\r\n                    data: {\r\n                        json: \"2\",\r\n                        id: voteId,\r\n                        vote: vid\r\n                    },\r\n                    success: function(responseJson) {\r\n                        switch (responseJson.status) {\r\n                            case \"ok\":\r\n                                tar.closest('.voteItem').find('.nums').html(num);\r\n                                break;\r\n                            case \"err\":\r\n                                alert(responseJson.message);\r\n                                break;\r\n                        }\r\n                    },\r\n                    error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n                        alert(\"投票已经关闭！\");\r\n                    }\r\n                });\r\n            }\r\n            getVoteData();\r\n            $('.voteBtn').on('click',function () {\r\n                var $this = $(this),vid = $this.closest('.voteItem').data('vid'),num = $this.closest('.voteItem').find('.nums').html(),isClk = $this.attr('data-clk');\r\n                if(isClk !== 'clked'){\r\n                    $this.attr('data-clk','clked').addClass('clked');\r\n                    num++;\r\n                    smtVote(vid,$this,num);\r\n                }\r\n            })\r\n        },\r\n        //二维码\r\n        fixCode: function() {\r\n            var fxCode = $('.fx-code'),ft = fxCode.offset().top;\r\n            function scrollFunc() {\r\n                var $win = $(window),st = $win.scrollTop();\r\n                if($win.width() < 1306){\r\n                    fxCode.hide();\r\n                }else{\r\n                    fxCode.show();\r\n                }\r\n                if(st >= (ft-($win.height()/2 - 120))){\r\n                    fxCode.addClass('cur');\r\n                }else{\r\n                    fxCode.removeClass('cur');\r\n                }\r\n            }\r\n            $(window).resize(scrollFunc).scroll(scrollFunc);\r\n        }\r\n\t};\r\n    $('.ztSldWrap').each(function(){\r\n        ymjsModel.ztSld('#'+$(this).attr('id'));\r\n    });\r\n    ymjsModel.vote();\r\n    ymjsModel.fixCode();\r\n})(jQuery);"]}