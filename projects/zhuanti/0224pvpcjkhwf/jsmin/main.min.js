!function(t){t.fn.gsPopup=function(e){function s(e,s){var a;switch(s){case"video_tgs":return a='<embed wmode="direct" flashvars="vid='+e+'&amp;tpid=0&amp;showend=1&amp;showcfg=1&amp;searchbar=1&amp;skin=http://imgcache.qq.com/minivideo_v1/vd/res/skins/TencentPlayerMiniSkin.swf&amp;shownext=1&amp;list=2&amp;autoplay=1" src="http://imgcache.qq.com/tencentvideo_v1/player/TPout.swf?max_age=86400&amp;v=20140714" quality="high" name="tenvideo_flash_player_1492679771297" id="tenvideo_flash_player_1492679771297" bgcolor="#000000" width="100%" height="100%" align="middle" allowscriptaccess="always" allowfullscreen="true" type="application/x-shockwave-flash" pluginspage="http://get.adobe.com/cn/flashplayer/">';case"video_tgs2":return a='<div id="tgsVideo"></div>';case"video_yk":return a='<embed height="100%" flashvars="isAutoPlay=true" allowscriptaccess="sameDomain" width="100%" align="middle" quality="high" invokeurls="false" src="http://player.youku.com/player.php/sid/'+e+'/v.swf" type="application/x-shockwave-flash" wmode="transparent">';case"video_bl":return a='<iframe height="100%" width="100%" id="vedioSrc" frameborder="0" allowfullscreen src="'+e+'"></iframe>';case"video_other":return a=e;case"pics":return a='<img src="'+e+'" alt="popimgs" width="100%" height="100%">';case"custom":return a=t(e).html()}}function a(e){var a="";a+='<div id="gsPopupMask" class="gsPopupMask"></div>',a+='<div id="gsPopup" class="gsPopup" style="',a+=e.style,a+='"><div class="gsPopupCon">',a+=s(e.sid,e.sty),a+='</div><a  class="gsPopupClose" id="gsPopupClose"></a></div>',t("body").append(a),d=setTimeout(function(){t("#gsPopupMask").addClass("cur"),t("#gsPopup").addClass("cur")},10),"video_tgs2"===e.sty&&t.getScript("http://vm.gtimg.cn/tencentvideo/txp/js/txplayer.js",function(){new Txplayer({containerId:"tgsVideo",vid:e.sid,width:"100%",height:e.height,autoplay:!0,showBullet:!1,showLogo:!1,showRecommendOnEnd:!1});t("#tgsVideo").closest(".gsPopupCon").css("overflow","hidden")})}function i(){clearTimeout(d),t("#gsPopupMask").removeClass("cur"),t("#gsPopup").removeClass("cur"),n=setTimeout(function(){t("#gsPopupMask").remove(),t("#gsPopup").hide().remove()},150)}function o(){t("#gsPopupClose").on("click",i),t("#gsPopupMask").on("click",i)}var n,d,c={afterOpen:""},l=t.extend(c,e),p=t(this);p.on("click",function(){clearTimeout(n);var e,s=t(this),i=s.data("w"),d=s.data("h"),c=s.data("diy"),p=t(window).height(),r={pos:"fixed",width:i,height:d,sid:s.data("sid"),sty:s.data("sty"),diy:c};e="width:"+r.width+"px;height:"+r.height+"px;",r.style="position:"+r.pos+";top:50%;left:50%;margin-left:-"+r.width/2+"px;margin-top:-"+r.height/2+"px;"+e,d>p&&(r.pos="absolute",r.style="position:"+r.pos+";top:"+s.offset().top+"px;left:50%;margin-left:-"+r.width/2+"px;"+e),a(r),o(),"function"==typeof l.afterOpen&&l.afterOpen()})}}(jQuery),$(".popupBtn").gsPopup(),function(t){var e={ztSld:function(e){var s=t(e),a=s.find(".arrBtnL"),i=s.find(".arrBtnR"),o=s.find(".ztSld"),n=o.find(".ztSldCon"),d=o.find(".ztSldNav");o.slide({mainCell:n,effect:"leftLoop",delayTime:250,prevCell:a,nextCell:i,switchLoad:"data-src",titCell:d,autoPage:"<li></li>",titOnClassName:"cur"})},vote:function(){function e(){t.ajax({type:"GET",dataType:"jsonp",url:"http://db2.gamersky.com/Vote/ShowVote.aspx",data:{json:"1",id:i},success:function(e){switch(e.status){case"ok":t.each(e.items,function(e,s){var a=s.Id,i=s.TotalNumber,o=t(".voteItem[data-vid="+a+"]");o.find(".nums").html(i)});break;case"err":alert(e.message)}}})}function s(e,s,a){t.ajax({type:"GET",dataType:"jsonp",url:"http://db5.gamersky.com/Vote/ShowVote.aspx",data:{json:"2",id:i,vote:e},success:function(t){switch(t.status){case"ok":s.closest(".voteItem").find(".nums").html(a);break;case"err":alert(t.message)}},error:function(t,e,s){alert("投票已经关闭！")}})}var a=t(".voteList"),i=a.data("voteid");e(),t(".voteBtn").on("click",function(){var e=t(this),a=e.closest(".voteItem").data("vid"),i=e.closest(".voteItem").find(".nums").html(),o=e.attr("data-clk");"clked"!==o&&(e.attr("data-clk","clked").addClass("clked"),i++,s(a,e,i))})},fixCode:function(){function e(){var e=t(window),i=e.scrollTop();e.width()<1306?s.hide():s.show(),i>=a-(e.height()/2-120)?s.addClass("cur"):s.removeClass("cur")}var s=t(".fx-code"),a=s.offset().top;t(window).resize(e).scroll(e)}};t(".ztSldWrap").each(function(){e.ztSld("#"+t(this).attr("id"))}),e.vote(),e.fixCode()}(jQuery);
//# sourceMappingURL=main.min.js.map
