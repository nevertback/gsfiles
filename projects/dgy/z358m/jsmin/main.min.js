var pgConfig={userMute:!1};!function(a){var i=["http://img7.gamersky.com/zqimg/dgy/z358/wap/task-pic.png","http://img7.gamersky.com/zqimg/dgy/z358/wap/bg-long.jpg","http://img7.gamersky.com/zqimg/dgy/z358/wap/csprite.png"];a.fn.extend({setRem:function(i){var n=a(window),s=n.width();s>i&&(s=i),this.css("font-size",s/i*100+"px")},pageBgm:function(i,n){var s=document.getElementById(i),t=this;a(document).one("touchstart",function(){t.removeClass(n),s.play()}),pgConfig.userMute===!1?(t.removeClass(n),s.play()):(t.addClass(n),s.pause()),t.on("tap",function(){pgConfig.userMute===!0?pgConfig.userMute=!1:pgConfig.userMute=!0,pgConfig.userMute===!1?(t.removeClass(n),s.play()):(t.addClass(n),s.pause())}),a(window).on({blur:function(){s.pause()},focus:function(){pgConfig.userMute===!1&&s.play()}}),document.addEventListener("visibilitychange",function(){var a=document.hidden;a?s.pause():pgConfig.userMute===!1&&s.play()})},loading:function(n){function s(){e.fadeOut(300),r.fadeOut(300),"function"==typeof n&&n&&n()}var t=this,e=a("#loading"),r=a("#loadingAnim");e.show(),r.show();var d=i;t.jpreLoader({splashVPos:"0",splashID:"#loadingAnim",showSplash:!0,loaderVPos:"0%",autoClose:!0,ldlist:d},function(){s()})}})}(jQuery),function(a){var i,n=a("#wrap"),s={tab:function(i,n,s){i.find(n).find("a").on("tap",function(){var t=a(this),e=t.index();i.find(n).find("a").removeClass("cur").eq(e).addClass("cur"),i.find(s).removeClass("cur").eq(e).addClass("cur")}),i.find(n).find("a").eq(0).addClass("cur"),i.find(s).eq(0).addClass("cur")},pgHero:function(){function n(i){var n="",s=t[i].list,d=[];e.find(".hero-nav").find("a").removeClass("cur"),e.find(".hero-nav").find(".heroNav"+i).addClass("cur"),n+='<div class="swiper-container heroSwp"><div class="swiper-wrapper">',n+='</div><a class="arr-btn arr-btn-l"></a><a class="arr-btn arr-btn-r"></a></div>',r.html(n),a.each(s,function(a,i){var n="";n+='<div class="hero-top">',n+='<div class="ht-name">'+i.name.f+'</div><div class="ht-line"></div>',n+='<div class="ht-others"><h4>'+i.name.s+"</h4><h5>cv："+i.cv+"</h5></div>",n+="</div>",n+='<div class="hero-pic">',n+='<div class="hp-pic"><img src="'+i.pic.w+'" alt="'+i.name.f+'"><p>武将服</p></div>',n+='<div class="hp-pic"><img src="'+i.pic.c+'" alt="'+i.name.f+'"><p>常服</p></div>',n+="</div>",n+='<div class="hero-des">',n+=i.des,n+="</div>",d.push(n)});var p=r.find(".heroSwp");new Swiper(p,{navigation:{nextEl:p.find(".arr-btn-r"),prevEl:p.find(".arr-btn-l")},virtual:{slides:d}})}var s="",t=i.heros,e=a("#heroIntro");s+='<div class="hero-nav">',a.each(t,function(a,i){s+='<a class="heroNav'+a+'" data-sel="'+a+'">'+i.nav+"</a>"}),s+="</div>",s+='<div class="hero-main" id="heroMain"></div>',e.html(s);var r=a("#heroMain");e.find(".hero-nav").find("a").on("tap",function(){var i=a(this),s=i.data("sel");n(s)}),n("wei")},pgKfsj:function(){function s(a,i,s){var t="";t+='<div class="pg-pop-mask pgPop pgPopClose"></div>',t+='<div class="pg-pop-main pgPop '+a+'">',t+=i,t+='<a class="pg-pop-close pgPopClose"></a>',t+="</div>",n.append(t),"function"==typeof s&&s&&s();var e=n.find(".pgPop");n.find(".pgPopClose").on("tap",function(){e.remove()})}var t="",e=i.kfsj,r=a("#locNavs");a.each(e,function(a,i){t+='<a class="locBtn location-btn location-btn'+i.kid+'" data-pop="'+a+'"><i></i><span>'+i.name+"</span></a>"}),r.html(t),r.find(".locBtn").on("tap",function(){var i=a(this),t=i.data("pop"),r="",d=e[t],p=[];d.list.length>1?(r+='<div class="pop-world pop-world-mut">',r+='<div class="pw-tit">'+d.name+"</div>",r+='<div class="swiper-container pwSwp"><div class="swiper-wrapper">',a.each(d.list,function(a,i){var n="";n+='<div class="swiper-slide">',n+='<div class="pw-pic"><img src="'+i.pic+'" alt="'+i.name+'"></div>',n+='<div class="pw-txt"><p>'+i.txt+"</p></div>",n+="</div>",p.push(n)}),r+='</div><a class="arr-btn arr-btn-l"></a><a class="arr-btn arr-btn-r"></a></div>',r+="</div>"):1===d.list.length&&(r+='<div class="pop-world pop-world-single">',r+='<div class="pw-tit">'+d.name+"</div>",r+='<div class="pw-pic"><img src="'+d.list[0].pic+'" alt="'+d.list[0].name+'"></div>',r+='<div class="pw-txt"><p>'+d.list[0].txt+"</p></div>",r+="</div>"),s("",r,function(){if(d.list.length>1){var a=n.find(".pwSwp");new Swiper(a,{navigation:{nextEl:a.find(".arr-btn-r"),prevEl:a.find(".arr-btn-l")},virtual:{slides:p}})}})})},pgWqxt:function(){var n="",s="",t="",e=i.wqxt,r=a("#wqIntro");a.each(e,function(i,n){s+='<a data-sel="'+i+'">'+n.name+"</a>",t+='<div class="wq-tab-con-item wqTabConItem">',t+='<div class="swiper-container wqSwp"><div class="swiper-wrapper">',a.each(n.list,function(a,i){t+='<div class="swiper-slide"><div class="swiper-lazy-preloader swiper-lazy-preloader-white"></div><div class="wq-pic"><img class="swiper-lazy" src="http://image.gamersky.com/webimg13/zhuanti/common/blank.png" data-src="'+i.pic+'" alt="'+n.name+'"></div><div class="wq-txt">'+i.txt+"</div></div>"}),t+='</div><a class="arr-btn arr-btn-l"></a><a class="arr-btn arr-btn-r"></a></div>',t+='<div class="wq-des">'+n.des+"</div></div>"}),n+='<div class="wq-tab wqTab">',n+='<div class="wq-tab-nav wqTabNav">'+s+"</div>",n+='<div class="wq-tab-con wqTabCon">'+t+"</div>",n+="</div>",r.html(n),this.tab(r.find(".wqTab"),".wqTabNav",".wqTabConItem"),r.find(".wqSwp").each(function(){var i=a(this);new Swiper(i,{lazy:{loadPrevNext:!0},navigation:{nextEl:i.find(".arr-btn-r"),prevEl:i.find(".arr-btn-l")}})})},pgDzxt:function(){var n="",t="",e="",r=i.dzxt,d=a("#dzIntro");a.each(r,function(i,n){var s="",r="";a.each(n.inner,function(i,n){s+="<a>"+n.name+"</a>",r+='<div class="dz-tab-inner-con-item dzTabInnerConItem"><div class="dz-des">'+n.des+"</div>",1===n.list.length?(r+='<div class="dz-pic"><img src="'+n.list[0].pic+'" alt="'+n.list[0].txt+'"></div>',""!==a.trim(n.list[0].txt)&&(r+='<div class="dz-txt">'+n.list[0].txt+"</div>")):n.list.length>1&&(r+='<div class="swiper-container dzSwp"><div class="swiper-wrapper">',a.each(n.list,function(a,i){r+='<div class="swiper-slide"><div class="swiper-lazy-preloader swiper-lazy-preloader-white"></div>',r+='<div class="dz-pic"><img class="swiper-lazy" src="http://image.gamersky.com/webimg13/zhuanti/common/blank.png" data-src="'+i.pic+'" alt="'+i.txt+'"></div>',r+='<div class="dz-txt"><p>'+i.txt+"</p></div>",r+="</div>"}),r+='</div><a class="arr-btn arr-btn-l"></a><a class="arr-btn arr-btn-r"></a></div>'),r+="</div>"}),t+="<a>"+n.name+"</a>",e+='<div class="dz-tab-con-item dzTabConItem">',e+='<div class="dz-tab-inner dzTabInner">',e+='<div class="dz-tab-inner-nav dzTabInnerNav">'+s+"</div>",e+='<div class="dz-tab-inner-con dzTabInnerCon">'+r+"</div>",e+="</div>",e+="</div>"}),n+='<div class="dz-tab dzTab">',n+='<div class="dz-tab-nav dzTabNav">'+t+"</div>",n+='<div class="dz-tab-con dzTabCon">'+e+"</div>",n+="</div>",d.html(n),this.tab(d.find(".dzTab"),".dzTabNav",".dzTabConItem"),d.find(".dzTabInner").each(function(){s.tab(a(this),".dzTabInnerNav",".dzTabInnerConItem")}),d.find(".dzSwp").each(function(){var i=a(this);new Swiper(i,{lazy:{},navigation:{nextEl:i.find(".arr-btn-r"),prevEl:i.find(".arr-btn-l")}})})},pgJb:function(){var n="",s=i.jb,t=a("#jbIntro"),e=[];n+='<div class="swiper-container jbSwp"><div class="swiper-wrapper">',a.each(s,function(a,i){var n="";n+='<div class="jb-pic"><img src="'+i.pic+'" alt="'+i.cpt+'"></div>',n+='<div class="jb-cpt"><span>'+i.cpt+"</span></div>",n+='<div class="jb-top">',n+="<h4>"+i.tit+"</h4>",n+='<div class="jb-time">'+i.time+"</div>",n+="</div>",n+='<div class="jb-con"><p>'+i.con+"</p></div>",e.push(n)}),n+='</div><a class="jb-arr jb-arr-prev"></a><a class="jb-arr jb-arr-next"></a></div>',t.html(n);var r=t.find(".jbSwp");new Swiper(r,{navigation:{nextEl:r.find(".jb-arr-next"),prevEl:r.find(".jb-arr-prev")},virtual:{slides:e},on:{init:function(){var a=r.find(".swiper-slide-next").find(".jb-cpt").html();r.find(".jb-arr-next").html(a)},slideChangeTransitionEnd:function(){var a=r.find(".swiper-slide-prev").find(".jb-cpt").html(),i=r.find(".swiper-slide-next").find(".jb-cpt").html();r.find(".jb-arr-prev").html(a),r.find(".jb-arr-next").html(i)}}})},pgBb:function(){var n="",s=i.bb,t=a("#bbIntro"),e=[];n+='<div class="swiper-container bbSwp"><div class="swiper-wrapper">',a.each(s,function(a,i){var n="";n+='<div class="bb-tit"><span>'+i.name+"</span></div>",n+='<div class="bb-pic"><img src="'+i.wappic+'" alt="'+i.name+'"></div>',n+='<a target="_blank" href="'+i.url+'" class="bb-buy"></a>',e.push(n)}),n+='</div><a class="bb-arr bb-arr-prev"></a><a class="bb-arr bb-arr-next"></a></div>',t.html(n);var r=t.find(".bbSwp");new Swiper(r,{navigation:{nextEl:r.find(".bb-arr-next"),prevEl:r.find(".bb-arr-prev")},virtual:{slides:e}})},pgTask:function(){function i(a,i,s){var t="";t+='<div class="pg-pop-mask pgPop pgPopClose"></div>',t+='<div class="pg-pop-main pgPop '+a+'">',t+=i,t+='<a class="pg-pop-close pgPopClose"></a>',t+="</div>",n.append(t),"function"==typeof s&&s&&s();var r=n.find(".pgPop");n.find(".pgPopClose").on("tap",function(){r.remove(),pgConfig.userMute===!1&&e.play()})}var s=n.find(".taskPlay"),t=s.data("vu"),e=document.getElementById("bgm");s.on("tap",function(){var n,s="",r=a(window).width();r>720&&(r=720),n=r/16*9,s+='<iframe height="'+n+'" width="'+r+'" src="http://player.youku.com/embed/'+t+'==" frameborder=0 allowfullscreen></iframe>',i("pg-pop-vd",s,function(){e.pause()})})},insertDom:function(){this.pgHero(),this.pgKfsj(),this.pgWqxt(),this.pgDzxt(),this.pgJb(),this.pgBb(),this.pgTask()},pageAnim:function(){function i(i){var n,s=a(window).width();return s>720&&(s=720),n=i/7.2*s}function n(n){new ScrollMagic.Scene({duration:i(9.2),offset:0,triggerElement:n}).addTo(t).on("progress",function(i){var s=i.progress.toFixed(5),t=a(n).find(".safeArea"),e=.2,r=.2;s<=e?t.css({transform:"translate3d("+100*(1-s/e)+"%,0,0)",opacity:s/e}):s>=1-r&&s<=1?t.css({transform:"translate3d("+100*(s-1+r)/r+"%,0,0)",opacity:(1-s)/r}):s<1-r&&s>e&&t.css({transform:"translate3d(0,0,0)",opacity:1})})}function s(n){new ScrollMagic.Scene({duration:i(12.8),offset:-i(.56),triggerElement:n}).addTo(t).on("progress",function(i){var s=i.progress.toFixed(5),t=a(n).find(".safeArea"),e=.2;s<=e?t.css({transform:"translate3d("+100*(1-s/e)+"%,0,0)",opacity:s/e}):s>e&&s<=1&&t.css({transform:"translate3d(0,0,0)",opacity:1})})}var t=new ScrollMagic.Controller;new ScrollMagic.Scene({offset:i(5.08),triggerElement:"#startSmAnim"}).setClassToggle(".pageStart","cur").addTo(t),n(".page2"),n(".page3"),n(".page4"),n(".page5"),n(".page6"),n(".page7"),n(".page8"),s(".page9")},render:function(n){n===!0?a("#loading,#loadingAnim").hide():a("body").loading(function(){a(".volBtn").pageBgm("bgm","volPause"),a(".page1").addClass("cur"),a.ajax({dataType:"Script",url:"http://j.gamersky.com/zq/z358/z358.config.js",cache:!0,success:function(){i=z358Data.dto,s.insertDom(),s.pageAnim(),a(".supportMe").supportMe()}})})},resizeRender:function(){a("html").setRem(720),a(window).resize(function(){a("html").setRem(720)})},init:function(){this.resizeRender(),this.render(!1)}};s.init()}(jQuery);
//# sourceMappingURL=main.min.js.map
