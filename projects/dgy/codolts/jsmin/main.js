var pageConfig = {
    countid:'987115',
    bgm:{
        txt:['打开声音','关闭声音'],
        start:'http://image.gamersky.com/webimg13/zhuanti/codolts/media/bgm.mp3'
    },
    userMute:true,
    volClk:true,
    isCommOpen:false,
    isVideoPlaying:false,
    addedComment:false,
    bgmvol:1,
    imglist:{
        loading:{
            logo1:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/ld-logo.png',
            logo2:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/ld-logo-g.png'
        },
        ldPage:{
            vd:'http://image.gamersky.com/webimg13/zhuanti/codolts/media/loading.mp4'
        },
        begin:{
            bg:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/bg_begin.jpg',
            gs:'http://www.gamersky.com/',
            gf:'http://codol.qq.com/'
        },
        page04:{
            bg:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/bg_04.jpg',
            para1:'动视暴雪出品，Raven工作室倾力打造，根据全球超人气《使命召唤》系列改编的新一代跑轰枪战网游。以充满动感的真实动作为基础，融入高科技大杀器和武器自定义系统，搭配丰富的战术装备，让你灵活在战场上移动，用百般方式自由杀敌，感受高速激情的团战。',
            para2:'Raven 从1990年创立以来，核心追求是最高质量的视觉效果和最佳的游戏玩法。RAVEN早在1997年就被动视收购，曾参与过《使命召唤：黑色行动》、《使命召唤：现代战争3》等的制作，如今接手并主导《使命召唤Online》研发，为中国玩家不断带来创新的玩法和游戏体验。'
        },
        page05:{
            bg:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/bg_05.jpg',
            tab:[
                [
                    {
                        nav:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s511n.jpg',
                        icon:'icon-n1',
                        tit:'经典爆破',
                        pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s511.jpg',
                        para:'玩家分为进攻和防守两个阵营，进攻方获得炸弹后，在规定的时间内，以摧毁地图中两个目标点或歼灭所有的防守方队员为胜利条件，而防守方则防御对方，保护目标不被摧毁或歼灭所有的攻击方队员获得胜利。在一场经典爆破中达到一定局数后将马上换边。'
                    },
                    {
                        nav:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s512n.jpg',
                        icon:'icon-n2',
                        tit:'冲锋团竞',
                        pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s512.jpg',
                        para:'经典的团队竞技模式，玩家将分为两个阵营对抗，率先达到杀敌目标分数，或者游戏时间结束后分数高的一方玩家阵营获得胜利，这个模式规则非常简单，适合新手快速熟悉与上手游戏。'
                    },
                    {
                        nav:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s513n.jpg',
                        icon:'icon-n3',
                        tit:'激光大乱斗',
                        pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s513.jpg',
                        para:'Raven工作室全新原创PVP模式，带你轻松玩转未来高科技枪战。每一位战士，都统一配备相同的激光枪和被动技能，光枪拥有极限的攻击力，无射程、无弹药限制，击中目标将一击必杀，枪法和身法将是王者的制胜之道。'
                    },
                    {
                        nav:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s514n.jpg',
                        icon:'icon-n4',
                        tit:'首领团竞',
                        pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s514.jpg',
                        para:'在这个模式里，每个人都有机会成为重装首领，带领队友一起突破重围。采用了动态随机系统，当前首领阵亡后将选择任意一位队友变身，可以“一秒当大哥”。首领具备强大的防御力和武器，可以为队友提供可靠的支援，像一部坦克般带领所有人前进。'
                    },
                    {
                        nav:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s515n.jpg',
                        icon:'icon-n5',
                        tit:'战术团竞',
                        pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s515.jpg',
                        para:'使命召唤特有的团队竞技模式，玩家将在地图中随机重生，向敌人发起进攻。率先达到杀敌数或游戏时间内杀敌更多一方将获得胜利。'
                    }
                ],
                [
                    {
                        nav:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s521n.jpg',
                        icon:'icon-n1',
                        tit:'生存模式',
                        pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s521.jpg',
                        para:'一个强调团队配合的模式，玩家之间相互合作来阻击敌人一波波猛烈的攻势。连续杀敌、秒杀、击落敌方直升机或者是救起受伤倒地的队友等，都会获得花色不同的扑克牌，可兑换武器弹药、技能、各种连杀技能、防弹背心甚至更换自己的战术背包。'
                    },
                    {
                        nav:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s522n.jpg',
                        icon:'icon-n2',
                        tit:'营救模式',
                        pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s522.jpg',
                        para:'《使命召唤》系列历史上的全新独创内容，在《使命召唤Online》中首次登场！6名玩家组成小队深入机械僵尸环伺的占领区，去搜索那里的幸存者并引导他们撤离！等待着玩家的除了有成群结队的“游荡者”机械僵尸、“生化猎犬”之外，“末日先遣舰”将会成为玩家撤离的最后障碍！'
                    },
                    {
                        nav:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s523n.jpg',
                        icon:'icon-n3',
                        tit:'僵尸围城',
                        pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s523.jpg',
                        para:'可以和朋友一起组队，通力合作冰神深入机械僵尸环伺的荒废都市，解开机械僵尸起源之谜！除了紧张刺激的僵尸突围，更有武器升级系统助你战斗！'
                    },
                    {
                        nav:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s524n.jpg',
                        icon:'icon-n4',
                        tit:'战车突围',
                        pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s524.jpg',
                        para:'原创PVE模式“战车突围”全球首发！你将面对危险的爆炸僵尸和超巨型BOSS“异变暴君”——它拥有多种可怖形态，具备跟踪导弹、圆弧飞碟甚至是制造分身等强力攻击方式。当然你也有新的伙伴“绞肉战车”，快与你的好友组队，一同探索如何击败机械僵尸巨怪“异变暴君”！'
                    },
                    {
                        nav:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s525n.jpg',
                        icon:'icon-n5',
                        tit:'空中收割者',
                        pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s525.jpg',
                        para:'中国独占PVE模式，Raven工作室倾力打造。在全新的地图“落日之城”里，你将在重型直升机上，与史诗般的怪物狂潮展开激烈战斗。超巨型的暴君、高度进化的末日战舰、机械炮塔、人类变异僵尸、爆炸僵尸等凶猛怪物悉数集结，展开一波又一波的攻击。'
                    }
                ],
                {
                    icon:'icon-arr',
                    tit:'单人剧情',
                    pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s531.jpg',
                    para:'恐怖组织“裂变力量”阴谋重重，神秘部队暗影军团暗涌流动。一次行动中，“裂变力量”手里的危险原料“115元素”被暗影军团盗走，后者企图利用其合成大规模杀伤生化武器。你将加入141特遣队，与伟大的战士肥皂、幽灵一起解除这次威胁，探寻暗影军团的行踪，经历曲折多变的故事。追查的过程中，141特遣队与暗影军团激烈交火，队中的一名成员神秘失踪。幽灵获得情报后擅自离队行动，随后裂变力量也被卷入这场战斗中，到底谁是其中的幕后黑手？幽灵和失踪队员去向如何？精彩的剧情，等你来翻篇。'
                }
            ]
        },
        page06:{
            bg:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/bg_06.jpg',
            tab:[
                {
                    tid:1,
                    tit:'炸弹小飞机',
                    pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s601.png',
                    vid:'h0017zyokuv',
                    tip:'6级解锁 / 4连杀可使用',
                    des:'带自动追踪装置的新一代攻击型无人机。放出后可以自动索敌，攻击地面和天空的目标，对敌人、地方空中支援都是新的威胁。'
                },
                {
                    tid:2,
                    tit:'空地导弹',
                    pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s602.png',
                    vid:'a00195lyh0p',
                    tip:'5连杀可使用',
                    des:'你将使用专属控制电脑，遥控并操纵一枚从空中发射的导弹，在其下落到地面时可以自由调整轰炸地点，可实现范围性的打击。'
                },
                {
                    tid:3,
                    tit:'哨戒机枪',
                    pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s603.png',
                    vid:'s00195pdqpa',
                    tip:'10级解锁 / 5连杀可使用',
                    des:'空投一个能够任意安置在战场中的自动机枪，其可以自动扫描并感应攻击范围内的敌人，一旦发现将自动射击将其歼灭。'
                },
                {
                    tid:4,
                    tit:'攻击直升机',
                    pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s604.png',
                    vid:'i0019a9cqho',
                    tip:'7连杀可使用',
                    des:'呼叫一架攻击直升机到战场上进行武装支援，直升机将持续在空中盘旋索敌，对于暴露在室外的敌人杀伤力巨大。'
                },
                {
                    tid:5,
                    tit:'无畏战士',
                    pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s605.png',
                    vid:'a0016k9xiqy',
                    tip:'44级解锁 / 11连杀可使用',
                    des:'玩家将穿上重型装甲，变成防御力超强的魁梧战士，持续时间无限。在无畏战士状态下，奔跑速度会慢，但防御力和承受伤害比普通战士高出一个级别。可以使用重机枪大火力压制，是提供掩护和支援的好帮手。'
                },
                {
                    tid:6,
                    tit:'空中炮艇',
                    pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s606.png',
                    vid:'b0016722b5t',
                    tip:'63级解锁 / 11连杀可使用',
                    des:'传奇控场大杀器空中炮艇，让你呼叫重型空对地攻击机从空中尽情扫荡敌人。搭载25毫米6管航炮、40毫米自动炮、105毫米人工装填式榴弹炮，可长时间停留空中，对地面车队、部队、建筑可造成致命打击，被称为“空中死神”。'
                }
            ]
        },
        page07:{
            bg:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/bg_07.jpg',
            moreUrl:'http://codol.gamersky.com/data/',
            tab:[
                {
                    tid:1,
                    pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s701.png',
                    tit:'C4炸药包',
                    des:'C4可塑炸药，结合专用引信引爆，可以抛出粘在墙壁、地面、天花板上，在地面上手动遥控引爆，威力极强。'
                },
                {
                    tid:2,
                    pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s702.png',
                    tit:'阔剑地雷',
                    des:'威名赫赫的定向杀伤地雷，靠单片大范围杀伤目标，但只能感应前方一定角度内的移动物体，威慑作用巨大。'
                },
                {
                    tid:3,
                    pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s703.png',
                    tit:'粘性手雷',
                    des:'带黏性的SEMTEX炸药，掷出后会粘着在其触碰到的第一个物体表面并延时起爆。'
                },
                {
                    tid:4,
                    pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s704.png',
                    tit:'十字弩',
                    des:'复古系兵器之一，射速较慢，弓箭在击中任何物体后会延时爆炸，一击必杀。'
                },
                {
                    tid:5,
                    pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s705.png',
                    tit:'飞刀',
                    des:'可以直接投掷，飞刀呈一定抛物线，拥有一击必杀的威力，而且可以回收重复使用。'
                },
                {
                    tid:6,
                    pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s706.png',
                    tit:'自由之剑',
                    des:'设计原型基于15世纪广泛使用的双手大剑，极长的剑身和明亮的锋刃，象征着为自由战斗的勇士精神。双手重剑在手，助你在战斗中无往不利。'
                },
                {
                    tid:7,
                    pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s707.png',
                    tit:'标枪导弹',
                    des:'著名的“发射后不管”式单兵反坦克导弹，启动后需要预先锁定目标，导弹发射后将从天而降打击目标，对敌人和直升机等载具都具备杀伤力。'
                },
                {
                    tid:8,
                    pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s708.png',
                    tit:'震撼弹',
                    des:'迟滞敌人行动并使其失去方向感，可造成少量伤害。'
                },
                {
                    tid:9,
                    pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s709.png',
                    tit:'盾牌',
                    des:'精英部队专用的特殊材料盾牌，可以防御任何子弹，一定程度上可以保护不受爆炸伤害，是配合支援的神器之一。'
                },
                {
                    tid:10,
                    pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s710.png',
                    tit:'贝蒂跳雷',
                    des:'经典反步兵地雷，被敌人触发后会弹射至半空中引爆，威力极强。如果及时卧倒可以部分减少受到的爆炸伤害。'
                },
                {
                    tid:11,
                    pic:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/s711.png',
                    tit:'蝙蝠镖',
                    des:'万圣节专属武器，投掷后一击必杀，可以捡回反复使用。'
                }
            ]
        },
        page08:{
            bg:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/bg_08.jpg'
        },
        end:{
            bg:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/bg_end.jpg',
            para:'CODOL由动视暴雪研发，以久负盛名的《Call of Duty》系列为题材，集合了《Call of Duty》全系列最受欢迎的元素制作的第一人称视角射击游戏网游，绝对是喜欢FPS游戏的玩家不可错过的大作！',
            urlZq:'http://codol.gamersky.com/',
            urlDn:'http://codol.qq.com/download.shtml'
        },
        comm:{
            bg:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/bg_comm.jpg'
        },
        p360:{
            bg:'http://image.gamersky.com/webimg13/zhuanti/codolts/pic/bg_360.jpg',
            url:'http://60.55.47.163:81/dutycall/'
        },
        vdend:{
            vd1:'',
            vd2:'http://image.gamersky.com/webimg13/zhuanti/codolts/media/endvd.mp4'
        }
    }
};
//预加载图片
 var preLoadPicsLists = {
     list1: [
         pageConfig.imglist.begin.bg,
         pageConfig.imglist.page04.bg,
         pageConfig.imglist.comm.bg

     ],
     list2:[
         pageConfig.imglist.p360.bg,
         pageConfig.imglist.page06.bg,
         pageConfig.imglist.page07.bg,
         pageConfig.imglist.page08.bg,
         pageConfig.imglist.end.bg
     ]
 };
/*
global $,jQuery,screenfull,pageConfig,tvp,preLoadPicsLists,Swiper;
 */
(function($){
    $.fn.gsPopup = function(options){
        var defaults = {
            //弹出后回调函数
            afterOpen:'',
            afterClose:''
        };
        var optionsEd = $.extend(defaults,options);
        var btn = $(this),outTimer,inTimer;
        function addSource(sid,sty) {
            var sourceDom;
            switch (sty) {
                case 'video_tgs':
                    sourceDom = '<embed wmode="direct" flashvars="vid=' + sid + '&amp;tpid=0&amp;showend=1&amp;showcfg=1&amp;searchbar=1&amp;skin=http://imgcache.qq.com/minivideo_v1/vd/res/skins/TencentPlayerMiniSkin.swf&amp;shownext=1&amp;list=2&amp;autoplay=1" src="http://imgcache.qq.com/tencentvideo_v1/player/TPout.swf?max_age=86400&amp;v=20140714" quality="high" name="tenvideo_flash_player_1492679771297" id="tenvideo_flash_player_1492679771297" bgcolor="#000000" width="100%" height="100%" align="middle" allowscriptaccess="always" allowfullscreen="true" type="application/x-shockwave-flash" pluginspage="http://get.adobe.com/cn/flashplayer/">';
                    return sourceDom;
                    break;
                case 'video_tgs2':
                    sourceDom = '<div id="tgsVideo"></div>';
                    return sourceDom;
                    break;
                case 'video_yk':
                    sourceDom = '<embed height="100%" flashvars="isAutoPlay=true" allowscriptaccess="sameDomain" width="100%" align="middle" quality="high" invokeurls="false" src="http://player.youku.com/player.php/sid/'+sid+'/v.swf" type="application/x-shockwave-flash" wmode="transparent">';
                    return sourceDom;
                    break;
                case 'video_bl':
                    sourceDom = '<iframe height="100%" width="100%" id="vedioSrc" frameborder="0" allowfullscreen src="'+sid+'"></iframe>';
                    return sourceDom;
                    break;
                case 'video_other':
                    sourceDom = sid;
                    return sourceDom;
                    break;
                case 'pics':
                    sourceDom = '<img src="'+sid+'" alt="popimgs" width="100%" height="100%">';
                    return sourceDom;
                    break;
                case 'custom':
                    sourceDom = $(sid).html();
                    return sourceDom;
                    break;
            }
        }
        function addPopup(opts) {
            var popupDom = '';
            popupDom += '<div id="gsPopupMask" class="gsPopupMask"></div>';
            popupDom += '<div id="gsPopup" class="gsPopup" style="';
            popupDom += opts.style;
            popupDom += '"><div class="gsPopupCon">';
            popupDom += addSource(opts.sid,opts.sty);
            popupDom += '</div><a  class="gsPopupClose" id="gsPopupClose"></a></div>';
            $('body').append(popupDom);
            inTimer = setTimeout(function () {
                $('#gsPopupMask').addClass('cur');
                $('#gsPopup').addClass('cur');
            },10);
            if(opts.sty === 'video_tgs2'){
                $.getScript("http://vm.gtimg.cn/tencentvideo/txp/js/txplayer.js",function(){
                    var player = new Txplayer({
                        containerId: 'tgsVideo',
                        vid: opts.sid,
                        width: '100%',
                        height: opts.height+35,
                        autoplay:true,
                        showBullet:false,
                        showLogo: false,
                        showRecommendOnEnd:false
                    });
                    $('#tgsVideo').closest('.gsPopupCon').css('overflow','hidden');
                });
            }
        }
        function removePopup() {
            clearTimeout(inTimer);
            $('#gsPopupMask').removeClass('cur');
            $('#gsPopup').removeClass('cur');
            outTimer = setTimeout(function () {
                $('#gsPopupMask').remove();
                $('#gsPopup').hide().remove();
                if(typeof optionsEd.afterClose === 'function'){
                    optionsEd.afterClose();
                }
            },150);
        }
        function closePopup() {
            $('#gsPopupClose').on('click',removePopup);
            $('#gsPopupMask').on('click',removePopup);
        }
        btn.on('click',function () {
            clearTimeout(outTimer);
            var $this = $(this),dw = $this.data('w'),dh = $this.data('h'),
                wh = $(window).height(),gerCss,
                popupOptions = {
                    pos:'fixed',
                    width:dw,
                    height:dh,
                    sid:$this.data('sid'),
                    sty:$this.data('sty')
                };
            gerCss = 'width:'+popupOptions.width+'px;height:'+popupOptions.height+'px;';
            popupOptions.style = 'position:'+popupOptions.pos+';top:50%;left:50%;margin-left:-'+popupOptions.width/2+'px;margin-top:-'+popupOptions.height/2+'px;'+gerCss;
            if(dh>wh){
                popupOptions.pos = 'absolute';
                popupOptions.style = 'position:'+popupOptions.pos+';top:'+$this.offset().top+'px;left:50%;margin-left:-'+popupOptions.width/2+'px;'+gerCss;
            }
            addPopup(popupOptions);
            closePopup();
            if(typeof optionsEd.afterOpen === 'function'){
                optionsEd.afterOpen();
            }
        });
    }
})(jQuery);
(function($){
    $.fn.autoScale = function(options){

        var defaults = {
            baseWidth:1920,
            baseHeight:1080,
            offsetT:0,//上偏移
            offsetL:0,//左偏移
            positionMethod:''
        };

        var opts = $.extend(defaults,options);

        this.each(function(){

            var thisCon = $(this),
                winWidth = $(window).width(),
                winHeight = $(window).height(),
                scalePercentW = winWidth/opts.baseWidth - opts.offsetL,
                scalePercentH = winHeight/opts.baseHeight - opts.offsetT;

            function setPosFun(){
                var acWH=scalePercentH;
                if(winHeight>(winWidth/16*9)){
                    acWH = scalePercentW;
                    thisCon.css({
                        'top':'50%',
                        'left':'0',
                        'transform-origin':'0 0',
                        'transform':'scale(' + acWH + ') translate(0,-50%)'
                    });
                }else{
                    acWH = scalePercentH;
                    thisCon.css({
                        'top':'0',
                        'left':'50%',
                        'transform-origin':'0 0',
                        'transform':'scale(' + acWH + ') translate(-50%,0)'
                    });
                }

                $(window).resize(function(){
                    winWidth = $(window).width();scalePercentW = winWidth/opts.baseWidth - opts.offsetL;
                    winHeight = $(window).height();scalePercentH = winHeight/opts.baseHeight - opts.offsetT;
                    acWH=scalePercentH;
                    if(winHeight>(winWidth/16*9)){
                        acWH = scalePercentW;
                        thisCon.css({
                            'top':'50%',
                            'left':'0',
                            'transform-origin':'0 0',
                            'transform':'scale(' + acWH + ') translate(0,-50%)'
                        });
                    }else{
                        acWH = scalePercentH;
                        thisCon.css({
                            'top':'0',
                            'left':'50%',
                            'transform-origin':'0 0',
                            'transform':'scale(' + acWH + ') translate(-50%,0)'
                        });
                    }
                });
            }
            setPosFun();
        });
    };
})(jQuery);
var animEnd='webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend',pageTimer;
$.fn.extend({
    animateCss: function (animationName,callback) {
        var animationEnd = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';
        this.addClass('animated ' + animationName).one(animationEnd, function() {
            $(this).removeClass('animated ' + animationName);
            if(callback){
                callback();
            }
        });
    }
});
function fullScreen() {
    if (screenfull.enabled) {
        screenfull.request();
    }
}
var ymjsModel={
    pageinit:function(){
        var pageWrap = $('#pageswrap'),
            htmlW = $(window).width(),htmlH = $(window).height();
        pageWrap.css({'width':htmlW + 'px','height':htmlH + 'px'});
    },
    autoPos:function(){
        $('.autoMH').each(function(){
            $(this).autoScale();
        });
    },
    bgmSet:function(bgmsrc){
        $('#bgm').attr('src',bgmsrc);
        if(pageConfig.userMute !== true){
            ymjsModel.bgmPlay();
        }
    },
    bgmBtn:function(tar){
        var thObj = this;
        tar.on('click',function(){
            if(pageConfig.volClk){
                pageConfig.userMute = true;
                thObj.bgmPause();
            }else{
                pageConfig.userMute = false;
                thObj.bgmPlay();
            }
        });
    },
    bgmPlay:function(){
        var bgmId = document.getElementById('bgm'),$bgmVol = $('.volbtn');
        bgmId.play();
        pageConfig.volClk = true;
        $bgmVol.removeClass('pause').find('span').text(pageConfig.bgm.txt[1]);
        bgmId.volume = 1;

    },
    bgmPause:function(){
        var bgmId = document.getElementById('bgm'),$bgmVol = $('.volbtn');
        bgmId.pause();
        pageConfig.volClk = false;
        $bgmVol.addClass('pause').find('span').text(pageConfig.bgm.txt[0]);
    },
    //失去焦点
    htFun:function(){
        var thObj = this;
        $(window).on({
            'blur':function(){
                thObj.bgmPause();
            },
            'focus':function(){
                if(pageConfig.userMute !== true && pageConfig.isVideoPlaying !==true){
                    thObj.bgmPlay();
                }
            }
        });
    },
    createBaiduShare:function(addClass){
        var bdshare = '';
        bdshare += '<div class="bdsharewrap bdstyle-c '+addClass+'"><div class="bdsharebuttonbox bdshare-button-style0-16" data-tag="share_1" data-bd-bind="1446461622481"><a class="bdicons bds_weixin" data-cmd="weixin" title="分享到微信"></a><a target="_self" class="bdicons bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a class="bdicons bds_sqq" data-cmd="sqq" title="分享到QQ"></a><a class="bdicons bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a class="bdicons bds_tieba" data-cmd="tieba" title="分享到贴吧"></a><a class="bdicons bds_renren" data-cmd="renren" title="分享到人人"></a><a class="bdicons bds_douban" data-cmd="douban" title="分享到豆瓣"></a><a class="bdicons bds_more" data-cmd="more"></a><a class="bds_count" data-cmd="count" title=""></a></div></div>';
        return bdshare;
    },
    chagePage:function(callback){
        clearTimeout(pageTimer);
        $('#fixNav').removeClass('cur');
        $('#dgyMain').removeClass('cur');
        pageTimer = setTimeout(function(){
            callback();
        },400);
    },
    preLoadImg:function (urls) {
        for (var i = 0; i < urls.length; i++) {
            var obj = new Image();
            obj.src = urls[i];
        }
    },
    dgyRender:function(){
        var dgyObj = this;
        dgyObj.htFun();
        dgyObj.autoPos();
    }
};
ymjsModel.dgyRender();
ymjsModel.bgmBtn($('.volbtn'));

/*
global $,ymjsModel,pageConfig,preLoadPicsLists,Swiper,fullScreen,bkDatas,mapData,armsData,abilitiesData,gearData,targetData
 */
var pageFunc = {
    bindKey:function (key,callback) {
        var keyCodeNum = {
            a:65,
            b:66,
            c:67,
            d:68,
            e:69,
            f:70,
            g:71,
            h:72,
            i:73,
            j:74,
            k:75,
            l:76,
            m:77,
            n:78,
            o:79,
            p:80,
            q:81,
            r:82,
            s:83,
            t:84,
            u:85,
            v:86,
            w:87,
            x:88,
            y:89,
            z:90,
            space:32,
            tab:9,
            shift:16,
            k1:49,
            k2:50,
            k3:51,
            k4:52,
            k5:53,
            k6:54
        };
        if(key === 'ml'){
            $(document).on('click',function () {
                $(this).off();
                if(typeof callback === 'function'){
                    callback();
                }
            });

        }else if(key === 'mr'){
            $('.goonBtn').on('click',function () {
                $(this).off();
                if(typeof callback === 'function'){
                    callback();
                }
            });

        }else{
            $(document).on({
                'keydown':function (event) {
                    if(pageConfig.isCommOpen === false){
                        //event.preventDefault();
                        var e = event ? event : window.event;
                        var ekc = e.keyCode;
                        if(ekc === 97){
                            ekc = 49;
                        }else if(ekc === 98){
                            ekc = 50;
                        }else if(ekc === 99){
                            ekc = 51;
                        }else if(ekc === 100){
                            ekc = 52;
                        }else if(ekc === 101){
                            ekc = 53;
                        }else if(ekc === 102){
                            ekc = 54;
                        }
                        if(ekc === keyCodeNum[key]){
                            $(document).off();
                            if(typeof callback === 'function'){
                                callback();
                            }
                        }
                    }
                }
            });
        }

    },
    addLogos:function () {
        var logoDom = '',imgdata = pageConfig.imglist.begin;
        logoDom += '<a target="_blank" href="'+imgdata.gs+'" class="logo-gs"></a>';
        logoDom += '<a target="_blank" href="'+imgdata.gf+'" class="logo-gf"></a>';
        return logoDom;
    },
	loadingFunc:function(loadState){
		var ld = '',$body = $('body'),thisPage = this,loadData = pageConfig.imglist.loading;
    	ld += '<div id="loading"></div><div id="loadingAnim"><img src="'+loadData.logo1+'" alt="" class="loadingAnim-img-g"><div class="loadingAnim-img"><img src="'+loadData.logo2+'"></div><div class="loadingtxt"></div></div>';
    	ld += '<div id="closeLoading" class="closeLoading"><div class="txt">全屏浏览可获得最佳体验，ESC或F11可退出全屏模式。</div><div class="clearfix btngroup"><a class="closeno">继续</a></div></div>';
    	if(loadState===true){
    		$body.append(ld);
    		$body.jpreLoader({
				splashVPos: "0",
				splashID: "#loadingAnim",
				showSplash: true,
				loaderVPos: '0%',
				autoClose: true
			}, function() {
				$('#closeLoading').show();
			});
			$('#closeLoading').find('.closeno').on('click',function(){
				fullScreen();
				$('#loading').fadeOut(300);
				$('#closeLoading').fadeOut(300);
				thisPage.loadPage();
			});
    	}else{
            $('.volbtn').addClass('cur');
    		this.page04();
    	}
        ymjsModel.preLoadImg(preLoadPicsLists.list1);
	},
    loadPage:function(){
        var pageDom = '',imgdata = pageConfig.imglist.ldPage;
        pageDom += '<div class="page_con page_ldp">';
        pageDom += '<video src="'+imgdata.vd+'" id="beginVideoLoad" class="page_bg"></video>';
        pageDom += '</div>';

        var dgyMain = $('#dgyMain');
        function thisFunc(){
            var vd = dgyMain.find('#beginVideoLoad'),vdb = vd[0];
            vdb.play();
            vdb.onended =function(){
                $('.volbtn').addClass('cur');
                pageConfig.userMute = false;
                ymjsModel.bgmSet(pageConfig.bgm.start);
                pageFunc.beginPage();
            };
        }
        ymjsModel.chagePage(function(){
            dgyMain.html(pageDom).addClass('cur');
            thisFunc();
        });
    },
	beginPage:function(){
		var pageDom = '',imgdata = pageConfig.imglist.begin;
		pageDom += '<div class="page_con page_begin">';
        pageDom += '<img src="'+imgdata.bg+'" alt="pics" class="page_bg">';
		pageDom += pageFunc.addLogos();
        pageDom += ymjsModel.createBaiduShare('');
        pageDom += '<a class="zanbtn supportMe" data-itemid="'+pageConfig.countid+'" data-field="digg" data-table="PE_U_Article"><span>赞<i class="zanNum">0</i></span></a>';
		pageDom += '<a class="btn1"></a>';
		pageDom += '</div>';

        var dgyMain = $('#dgyMain');
        function thisFunc(){
            dgyMain.find('.btn1').on('click',function(){
                pageFunc.transReGoPage('d16c5420f7',function () {
                    pageFunc.page04();
                });
            });
            $(".supportMe").supportMe();
            window._bd_share_main.init();
            //ymjsModel.preLoadImg(preLoadPicsLists.list2);
        }
        ymjsModel.chagePage(function(){
            dgyMain.html(pageDom).addClass('cur');
            thisFunc();
        });
	},
    page04:function(){
        var pageDom = '',imgdata = pageConfig.imglist.page04;
        pageDom += '<div class="page_con page04">';
        pageDom += '<img src="'+imgdata.bg+'" alt="pics" class="page_bg">';
        pageDom += pageFunc.addLogos();
        pageDom += '<div class="para para1"><p>'+imgdata.para1+'</p></div>';
        pageDom += '<div class="para para2"><p>'+imgdata.para2+'</p></div>';
        pageDom += '<a class="btn_sty btn_sty2 btn1">游戏模式</a>';
        pageDom += '<a class="btn2" data-sty="video_tgs2" data-sid="v00140sr75v" data-w="800" data-h="452"></a>';
        pageDom += '</div>';

        var dgyMain = $('#dgyMain');
        function thisFunc(){
            dgyMain.find('.btn1').on('click',function(){
                pageFunc.page05();
            });
            $('.btn2').gsPopup({
                afterOpen:function () {
                    pageConfig.isVideoPlaying = true;
                    ymjsModel.bgmPause();
                },
                afterClose:function () {
                    pageConfig.isVideoPlaying = false;
                    if(pageConfig.userMute !== true){
                        ymjsModel.bgmPlay();
                    }
                }
            });
            pageFunc.fixedNavFunc();
        }
        ymjsModel.chagePage(function(){
            dgyMain.html(pageDom).addClass('cur');
            thisFunc();
        });
    },
    page05:function(){
        var pageDom = '',imgdata = pageConfig.imglist.page05;
        function ctSfqBox(dt,hasNav) {
            var boxDom = '';
            boxDom += '<div class="imt-con"><img class="ztTabLazyLoad" data-lzy="'+dt.pic+'" src="http://image.gamersky.com/webimg13/zhuanti/common/blank.png" alt="'+dt.tit+'"><i class="txt-mask"></i><div class="imt-txt"><div class="tit"><i class="icons '+dt.icon+'"></i>'+dt.tit+'</div><div class="para">'+dt.para+'</div></div></div>';
            if(hasNav === true){
                boxDom += '<a class="sfq-box-nav sfqNav"><img class="ztTabLazyLoad" src="http://image.gamersky.com/webimg13/zhuanti/common/blank.png" data-lzy="'+dt.nav+'" alt="'+dt.tit+'"><i></i></a>';
            }
            return boxDom;
        }
        pageDom += '<div class="page_con page05">';
        pageDom += '<img src="'+imgdata.bg+'" alt="pics" class="page_bg">';
        pageDom += pageFunc.addLogos();
        pageDom += '<div class="tabs">';
        pageDom += '<div class="tabsItems">';

        pageDom += '<div class="tabsItem">';
        pageDom += '<div class="clearfix sfq-boxs sfqBoxs">';
        pageDom += '<div class="sfq-box sfqBox cur">'+ctSfqBox(imgdata.tab[0][0],true)+'</div>';
        pageDom += '<div class="sfq-box sfqBox">'+ctSfqBox(imgdata.tab[0][1],true)+'</div>';
        pageDom += '<div class="sfq-box sfqBox">'+ctSfqBox(imgdata.tab[0][2],true)+'</div>';
        pageDom += '<div class="sfq-box sfqBox">'+ctSfqBox(imgdata.tab[0][3],true)+'</div>';
        pageDom += '<div class="sfq-box sfqBox">'+ctSfqBox(imgdata.tab[0][4],true)+'</div>';
        pageDom += '</div>';
        pageDom += '</div>';

        pageDom += '<div class="tabsItem">';
        pageDom += '<div class="clearfix sfq-boxs sfqBoxs">';
        pageDom += '<div class="sfq-box sfqBox cur">'+ctSfqBox(imgdata.tab[1][0],true)+'</div>';
        pageDom += '<div class="sfq-box sfqBox">'+ctSfqBox(imgdata.tab[1][1],true)+'</div>';
        pageDom += '<div class="sfq-box sfqBox">'+ctSfqBox(imgdata.tab[1][2],true)+'</div>';
        pageDom += '<div class="sfq-box sfqBox">'+ctSfqBox(imgdata.tab[1][3],true)+'</div>';
        pageDom += '<div class="sfq-box sfqBox">'+ctSfqBox(imgdata.tab[1][4],true)+'</div>';
        pageDom += '</div>';
        pageDom += '</div>';

        pageDom += '<div class="tabsItem"><div class="single">'+ctSfqBox(imgdata.tab[2])+'</div></div>';

        pageDom += '</div>';
        pageDom += '<div class="clearfix tabsNavs"><a class="tabsNav1"></a><a class="tabsNav2"></a><a class="tabsNav3"></a></div></div>';
        pageDom += '<a class="btn_sty btn_sty2 btn1">连杀技能</a>';
        pageDom += '</div>';

        var dgyMain = $('#dgyMain');
        function thisFunc(){
            dgyMain.find('.btn1').on('click',function(){
                pageFunc.page06();
            });
            var tabArr = {
                tab:dgyMain.find('.tabs'),
                nav:dgyMain.find('.tabsNavs'),
                items:dgyMain.find('.tabsItems'),
                item:dgyMain.find('.tabsItem')
            };
            pageFunc.tab(tabArr.tab,tabArr.nav,tabArr.items,tabArr.item,true);
            dgyMain.find('.sfqBoxs').each(function () {
                var $this = $(this);
                $this.find('.sfqNav').on('click',function () {
                    $this.find('.sfqBox').removeClass('cur');
                    $(this).closest('.sfqBox').addClass('cur');
                })
            });
            pageFunc.fixedNavFunc();
        }
        ymjsModel.chagePage(function(){
            dgyMain.html(pageDom).addClass('cur');
            thisFunc();
        });
    },
    page06:function(){
        var pageDom = '',imgdata = pageConfig.imglist.page06,
            tabItemDom = '',tabNavDom ='';
        function ctItem(dt) {
            var itemDom = '';
            itemDom += '<div class="tabsItem">';
            itemDom += '<div class="txtwrap"><h4>'+dt.tit+'</h4><h5>'+dt.tip+'</h5><p>'+dt.des+'</p></div>';
            itemDom += '<img src="http://image.gamersky.com/webimg13/zhuanti/common/blank.png" data-lzy="'+dt.pic+'" alt="'+dt.tit+'" class="ztTabLazyLoad">';
            itemDom += '<a class="vdplay" data-sty="video_tgs2" data-sid="'+dt.vid+'" data-w="800" data-h="452"></a>';
            itemDom += '</div>';
            return itemDom;
        }
        function ctNav(dt) {
            var navDom = '';
            navDom += '<a><i class="tn'+dt.tid+'"></i><span>'+dt.tit+'</span></a>';
            return navDom;
        }
        $.each(imgdata.tab,function (i,item) {
            tabItemDom += ctItem(item);
            tabNavDom += ctNav(item);
        });
        pageDom += '<div class="page_con page06">';
        pageDom += '<img src="'+imgdata.bg+'" alt="pics" class="page_bg">';
        pageDom += pageFunc.addLogos();

        pageDom += '<div class="tabs lotTabs">';
        pageDom += '<div class="tabsItems">';
        pageDom += tabItemDom;
        pageDom += '</div>';
        pageDom += '<div class="clearfix tabsNavs">'+tabNavDom+'</div></div>';
        pageDom += '';
        pageDom += '<a class="btn_sty btn_sty2 btn1">武器装备</a>';
        pageDom += '</div>';

        var dgyMain = $('#dgyMain');
        function thisFunc(){
            dgyMain.find('.btn1').on('click',function(){
                pageFunc.page07();
            });
            var tabArr = {
                tab:dgyMain.find('.tabs'),
                nav:dgyMain.find('.tabsNavs'),
                items:dgyMain.find('.tabsItems'),
                item:dgyMain.find('.tabsItem')
            };
            pageFunc.tab(tabArr.tab,tabArr.nav,tabArr.items,tabArr.item,true);
            $('.vdplay').gsPopup({
                afterOpen:function () {
                    pageConfig.isVideoPlaying = true;
                    ymjsModel.bgmPause();
                },
                afterClose:function () {
                    pageConfig.isVideoPlaying = false;
                    if(pageConfig.userMute !== true){
                        ymjsModel.bgmPlay();
                    }
                }
            });
            pageFunc.fixedNavFunc();
        }
        ymjsModel.chagePage(function(){
            dgyMain.html(pageDom).addClass('cur');
            thisFunc();
        });
    },
    page07:function(){
        var pageDom = '',imgdata = pageConfig.imglist.page07,
            tabItemDom = '',tabNavDom ='';
        function ctItem(dt) {
            var itemDom = '';
            itemDom += '<div class="tabsItem">';
            itemDom += '<div class="txtwrap"><h4>'+dt.tit+'</h4><p>'+dt.des+'</p></div>';
            itemDom += '<img src="http://image.gamersky.com/webimg13/zhuanti/common/blank.png" data-lzy="'+dt.pic+'" alt="'+dt.tit+'" class="ztTabLazyLoad">';
            itemDom += '</div>';
            return itemDom;
        }
        function ctNav(dt) {
            var navDom = '';
            navDom += '<a><i class="tn'+dt.tid+'"></i><span>'+dt.tit+'</span></a>';
            return navDom;
        }
        $.each(imgdata.tab,function (i,item) {
            tabItemDom += ctItem(item);
            tabNavDom += ctNav(item);
        });
        pageDom += '<div class="page_con page07">';
        pageDom += '<img src="'+imgdata.bg+'" alt="pics" class="page_bg">';
        pageDom += pageFunc.addLogos();

        pageDom += '<div class="tabs lotTabs">';
        pageDom += '<div class="tabsItems">';
        pageDom += tabItemDom;
        pageDom += '</div>';
        pageDom += '<div class="clearfix tabsNavs">'+tabNavDom+'</div></div>';

        pageDom += '<a target="_blank" href="'+imgdata.moreUrl+'" class="infosMore"></a><a class="btn_sty btn_sty2 btn1">经典地图</a>';
        pageDom += '</div>';

        var dgyMain = $('#dgyMain');
        function thisFunc(){
            dgyMain.find('.btn1').on('click',function(){
                pageFunc.p360Page();
            });
            var tabArr = {
                tab:dgyMain.find('.tabs'),
                nav:dgyMain.find('.tabsNavs'),
                items:dgyMain.find('.tabsItems'),
                item:dgyMain.find('.tabsItem')
            };
            pageFunc.tab(tabArr.tab,tabArr.nav,tabArr.items,tabArr.item,true);
            pageFunc.fixedNavFunc();
        }
        ymjsModel.chagePage(function(){
            dgyMain.html(pageDom).addClass('cur');
            thisFunc();
        });
    },
    p360Page:function () {
        var pageDom = '',imgdata = pageConfig.imglist.p360;
        pageDom += '<div class="page_con page_p360 p360Page">';
        pageDom += '<img src="'+imgdata.bg+'" alt="pics" class="page_bg">';
        pageDom += '<div class="fake_load"><i></i></div>';
        pageDom += '<div class="btn btn_load cur">Loading...</div>';
        pageDom += '<a class="btn_sty btn_sty2 btn_go">进入全景地图</a>';
        pageDom += '</div>';

        var dgyMain = $('#dgyMain'),timerStart,timerEnd;
        function thisFunc(){
            timerStart = setTimeout(function () {
                dgyMain.find('.fake_load').addClass('cur');
            },1000);
            timerEnd = setTimeout(function () {
                dgyMain.find('.btn_load').removeClass('cur');
                dgyMain.find('.btn_go').addClass('cur');
            },3100);
            dgyMain.find('.btn_go').on('click',function () {
                pageConfig.isVideoPlaying = true;
                ymjsModel.bgmPause();
                var iframeDom = '';
                iframeDom += '<div id="p360iframe" class="p360_iframe"><iframe src="'+imgdata.url+'" frameborder="0"></iframe><a class="p360_iframe_close"></a></div>';
                $('body').append(iframeDom);
                $('.p360_iframe_close').on('click',function () {
                    pageFunc.vdEndPage();
                    setTimeout(function () {
                        $('#p360iframe').fadeOut(500);
                    },250);
                    setTimeout(function () {
                        $('#p360iframe').remove();
                    },1000);
                    $(this).off();
                });
            });
            pageFunc.fixedNavFunc();
        }
        ymjsModel.chagePage(function(){
            dgyMain.html(pageDom).addClass('cur');
            thisFunc();
        });
    },
    vdEndPage:function(){
        var pageDom = '',imgdata = pageConfig.imglist.vdend;
        pageDom += '<div class="page_con page_vdend">';
        pageDom += '<video src="'+imgdata.vd2+'" id="vd2" class="bg-vd" preload="auto"></video>';
        pageDom += '<div class="vd-notice vd-notice-w cur"><div class="txt">按 <b>W</b> 键前进</div></div>';
        pageDom += '<div class="vd-notice vd-notice-shift"><div class="txt">按 <b>Shift</b> 键冲刺</div></div>';
        pageDom += '<div class="vd-notice vd-notice-ml"><div class="txt">按 <b>左键</b> 射击敌人</div><i class="ml-icon"></i></div>';
        pageDom += '<div class="vd-notice vd-notice-mr"><div class="txt">按 <b>右键</b> 打开机瞄，可精准射杀敌人</div><a class="btn_sty btn_sty2 btns goonBtn">继续</a></div>';
        pageDom += '<div class="vd-notice vd-notice-r"><div class="txt"><b>糟糕，没子弹了！</b>按 <b>R</b> 键更换弹夹</div></div>';
        pageDom += '<div class="vd-notice vd-notice-space"><div class="txt">按 <b>空格</b> 键跳过障碍物</div></div>';
        pageDom += '<div class="vd-notice vd-notice-k5"><div class="txt">按 <b>5键</b> 使用连杀技能 <b>空对地导弹</b></div></div>';
        pageDom += '<div class="vd-notice vd-notice-end"><a class="btns btn_sty btn_sty2 btn-again">在玩一次</a><a class="btns btn_sty btn_sty2 btn-go">体验更多</a></div>';
        pageDom += '</div>';

        var dgyMain = $('#dgyMain');
        function thisFunc(){
            $('.volbtn').removeClass('cur');
            pageConfig.isVideoPlaying = true;
            ymjsModel.bgmPause();
            var vdControl = {
                vdPart1:function () {
                    var thisVideo = document.getElementById('vd2'),
                        vdLook;

                    function updateTimeFunc(endtime,callback){
                        thisVideo.play();
                        vdLook = setInterval(function(){
                            var vct = thisVideo.currentTime;
                            if(vct>=endtime){
                                if(typeof callback === 'function'){
                                    callback();
                                }
                                clearInterval(vdLook);
                            }
                        },1);
                    }
                    var keyFramesArr = [
                        [1.5,'shift'],
                        [5.7,'ml'],
                        [15,'ml'],
                        [16.2,'mr'],
                        [18.3,'r'],
                        [22.4,'space'],
                        [24.1,'ml'],
                        [29.7,'ml'],
                        [36.1,'mr'],
                        [39,'ml'],
                        [41,'k5']
                    ],initKey = 0;
                    function keyEventBind(thkey,callback) {
                        function triEvent() {
                            dgyMain.find('.vd-notice').removeClass('cur');
                            if(typeof callback === 'function'){
                                callback();
                                if(initKey < keyFramesArr.length){
                                    keyEventBind(initKey,function () {
                                        initKey++;
                                    });
                                }else{
                                    thisVideo.play();
                                }
                            }
                        }
                        updateTimeFunc(keyFramesArr[thkey][0],function () {
                            thisVideo.pause();
                            dgyMain.find('.vd-notice-'+keyFramesArr[thkey][1]).addClass('cur');
                            pageFunc.bindKey(keyFramesArr[thkey][1],function () {
                                triEvent();
                            });
                        });
                    }
                    keyEventBind(initKey,function () {
                        initKey++;
                    });

                    thisVideo.onended = function () {
                        dgyMain.find('.vd-notice-end').addClass('cur');
                    };
                },
                init:function () {
                    pageConfig.isVideoPlaying = true;
                    ymjsModel.bgmPause();
                    var vcl = this;
                    pageFunc.bindKey('w',function () {
                        dgyMain.find('.vd-notice-w').removeClass('cur');
                        vcl.vdPart1();
                    });
                }
            };
            vdControl.init();
            dgyMain.find('.btn-again').on('click',function(){
                pageFunc.vdEndPage();
            });
            dgyMain.find('.btn-go').on('click',function(){
                pageConfig.isVideoPlaying = false;
                if(pageConfig.userMute !== true){
                    ymjsModel.bgmPlay();
                }
                pageFunc.endPage();
                $('.volbtn').addClass('cur');
            });
        }
        ymjsModel.chagePage(function(){
            dgyMain.html(pageDom).addClass('cur');
            thisFunc();
        });
    },
    endPage:function(){
        var pageDom = '',imgdata = pageConfig.imglist.end,begindata = pageConfig.imglist.begin;

        pageDom += '<div class="page_con page_end endPage">';
        pageDom += '<img src="'+imgdata.bg+'" alt="pics" class="page_bg">';
        pageDom += '<a target="_blank" href="'+begindata.gs+'" class="logo-gs"></a>';
        pageDom += '<a target="_blank" href="'+begindata.gf+'" class="logo-gf"></a>';
        pageDom += '<div class="infos">';
        pageDom += '<p>'+imgdata.para+'</p>';
        pageDom += ymjsModel.createBaiduShare('');
        pageDom += '<div class="clearfix btngroup"><a target="_blank" href="'+begindata.gf+'" class="btn btn_gf"></a><a target="_blank" href="'+imgdata.urlZq+'" class="btn btn_zq"></a><a class="btn btn_dn" target="_blank" href="'+imgdata.urlDn+'"></a><a class="btn btn_comm"></a></div>';
        pageDom += '<a class="zanbtn supportMe" data-itemid="'+pageConfig.countid+'" data-field="digg" data-table="PE_U_Article"><i class="ico_zan"></i><span><i class="zanNum">0</i></span></a>';
        pageDom += '</div>';
        pageDom += '</div>';

        var dgyMain = $('#dgyMain');
        function thisFunc(){
            dgyMain.find('.btn_comm').on('click',function () {
                pageFunc.commPage();
            });
            $(".supportMe").supportMe();
            window._bd_share_main.init();
            pageFunc.fixedNavFunc();
        }
        ymjsModel.chagePage(function(){
            dgyMain.html(pageDom).addClass('cur');
            thisFunc();
        });
    },
	commPage:function(){
		var pageDom = '',imgdata = pageConfig.imglist.comm;

		function commentAdd(){
			var doc = document,
				s = doc.createElement('script'),
				h = doc.getElementsByTagName('head')[0] || doc.head || doc.documentElement;
			s.type = 'text/javascript';
			s.charset = 'utf-8';
			s.src = 'http://j.gamersky.com/web2015/comment/js/commentconfig.js';
			h.insertBefore(s, h.firstChild);
			window.SCS_NO_IFRAME = true;
		}

		pageDom += '<div class="page_con page_comm">';
		pageDom += '<img src="'+imgdata.bg+'" alt="replace" class="comm_bg">';
        pageDom += '<img src="'+imgdata.rw+'" alt="replace" class="comm_bg_rw">';
		pageDom += '<div class="comm hei"><div class="cont"><div class="tit"></div>';
		pageDom += '<div id="SOHUCS" sid="'+pageConfig.countid+'"></div>';
		pageDom += '</div></div>';
		pageDom += '<a class="btn_close"><span>返回</span></a>';
		pageDom += '</div>';

		var dgyMain = $('#dgyComm');
        pageConfig.isCommOpen = true;
		if(pageConfig.addedComment === false){
			dgyMain.addClass('cur').html(pageDom);
			commentAdd();
			pageConfig.addedComment = true;
		}else{
			dgyMain.addClass('cur');
            $("#SOHUCS").GetComment();
		}
		$('.page_comm').on('click','.cmt-commentbtn',function () {
            dgyMain.find('.comm').animate({scrollTop:0},200);
        });
        dgyMain.find('.btn_close').on('click',function(){
            dgyMain.removeClass('cur');
            pageConfig.isCommOpen = false;
            $('.page_comm').off();
        });
	},
    transReGoPage:function(transVu,callback1){
        var pageDom = '';

        pageDom += '<div class="page_con page_trans">';
        pageDom += '<div class="letvwrap"><embed src="http://yuntv.letv.com/bcloud.swf" allowFullScreen="true" quality="high" align="middle" allowScriptAccess="always" width="100%" height="100%" flashvars="uu=cfd9191aeb&vu='+transVu+'&pu=667b454198&auto_play=1&gpcflag=1&width=1920&height=1080&lang=zh_CN" type="application/x-shockwave-flash"></embed></div>';
        if(callback1){
            pageDom += '<div class="gdvd_btn gdvd_loding"></div><a class="btns_go btn_sty btn_sty2">继续</a>';
        }
        pageDom += '</div>';

        var dgyMain = $('#dgyMain');
        function thisFunc(){
            pageConfig.isVideoPlaying = true;
            ymjsModel.bgmPause();
            if(callback1){
                dgyMain.find('.btns_go').on('click',function(){
                    pageConfig.isVideoPlaying = false;
                    if(pageConfig.userMute !== true){
                        ymjsModel.bgmPlay();
                    }
                    callback1();
                });
            }
            setTimeout(function () {
                dgyMain.find('.gdvd_loding').addClass('cur');
            },100);
            setTimeout(function () {
                dgyMain.find('.gdvd_loding').remove();
                dgyMain.find('.btns_go').addClass('cur');
            },10000);
        }
        ymjsModel.chagePage(function(){
            dgyMain.html(pageDom).addClass('cur');
            thisFunc();
        });
    },
    tab:function (tar,nav,cons,con,isLazyLoad) {
        var $nav = tar.find(nav).find('a'),$con = tar.find(cons),tabTimer;
        $nav.on({
            'mouseover':function () {
                var $this = $(this),idx = $this.index();
                tabTimer = setTimeout(function () {
                    $nav.removeClass('cur');
                    $con.find(con).removeClass('cur');
                    if(isLazyLoad === true){
                        $con.find(con).eq(idx).find('.ztTabLazyLoad').each(function () {
                            $(this).attr('src',$(this).data('lzy'));
                        });
                    }
                    $this.addClass('cur');
                    $con.find(con).eq(idx).addClass('cur');
                },150);
            },
            'mouseout':function () {
                clearTimeout(tabTimer);
            }
        });
        function tabInit() {
            var fstCon = $con.find(con).eq(0);
            $nav.eq(0).addClass('cur');
            if(isLazyLoad === true){
                fstCon.find('.ztTabLazyLoad').each(function () {
                    $(this).attr('src',$(this).data('lzy'));
                });
            }
            fstCon.addClass('cur');
        }
        tabInit();
    },
    fixedNav:function(){
        var fixNavDom = '';
        fixNavDom += '<div class="fx_list">';
        fixNavDom += '<a class="fixBtn" data-pg="beginPage"><i></i><span>TOP</span></a>';
        fixNavDom += '<a class="fixBtn" data-pg="page04"><i></i><span>游戏简介</span></a>';
        fixNavDom += '<a class="fixBtn" data-pg="page05"><i></i><span>游戏模式</span></a>';
        fixNavDom += '<a class="fixBtn" data-pg="page06"><i></i><span>连杀技能</span></a>';
        fixNavDom += '<a class="fixBtn" data-pg="page07"><i></i><span>武器装备</span></a>';
        fixNavDom += '<a class="fixBtn" data-pg="p360Page"><i></i><span>经典地图</span></a>';
        fixNavDom += '<a class="fixBtn" data-pg="vdEndPage"><i></i><span>体验游戏</span></a>';
        fixNavDom += '<a class="fixBtn" data-pg="endPage"><i></i><span>立即下载</span></a>';
        fixNavDom += '<a class="fixBtn_comm"><i></i><span>玩家评论</span></a>';
        fixNavDom += '</div>';

        var fixNav = $('#fixNav');
        fixNav.html(fixNavDom);
        fixNav.on({
            'mouseover':function () {
                $(this).addClass('hover');
            },
            'mouseout':function () {
                $(this).removeClass('hover');
            }
        });
        fixNav.on('click','.enClk',function () {
            var sel = $(this).data('pg');
            pageFunc[sel]();
        });
        fixNav.find('.fixBtn_comm').on('click',function () {
            pageFunc.commPage();
        });
    },
    fixedNavFunc:function () {
        var fixNav = $('#fixNav'),dm = $('#dgyMain');
        fixNav.addClass('cur');
        fixNav.find('.fixBtn').each(function () {
            var $this = $(this),num = $this.data('pg');
            if(dm.find('.'+num).length>0){
                fixNav.find('.fixBtn').removeClass('cur').addClass('enClk');
                $this.removeClass('enClk').addClass('cur');
            }else{
                $this.addClass('enClk');
            }
        });
    },
	render:function(){
		var pf = this;
		pf.loadingFunc(true);
        pf.fixedNav();
	}
};
pageFunc.render();
