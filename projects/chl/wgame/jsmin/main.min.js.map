{"version":3,"sources":["omnipotentloginiframe.js","yy.login.js","yy.login.wap.js"],"names":["$","urlParam","name","url","window","location","href","results","RegExp","exec","urlName","pathname","split","fn","extend","loginiframeForm","options","$this","this","on","event","keyCode","find","click","preventDefault","$userName","$passWord","YearNone","attr","val","alert","focus","ajax","type","dataType","data","logindata","JSON2","stringify","username","password","checkcode","expiration","success","responseJson","status","reload","body","loginUser","hide","show","html","userface","after","userid","resize","WW","width","TW","outerWidth","trigger","keyup","GameLink","datagame","server_id","serverid","configType","remove","addClass","removeClass","document","encodeURI","$iframe","gameUrl","yygame","setBodySize","wh","height","css","overflow-y","setGameSize","$gamearea","ww","screenOri","top","parseInt","checklogin","init","jQuery"],"mappings":"AAAAA,EAAA,WACA,GAAAC,GAAA,SAAAC,EAAAC,GACAA,IAAAA,EAAAC,OAAAC,SAAAC,KACA,IAAAC,GAAA,GAAAC,QAAA,SAAAN,EAAA,aAAAO,KAAAN,EACA,OAAAI,GAAAA,EAAA,GAAA,GAGAG,EAAAN,OAAAC,SAAAM,SAAAC,MAAA,KAAA,EACAZ,GAAAa,GAAAC,QACAC,gBAAA,SAAAC,GACA,GAAAC,GAAAjB,EAAAkB,KAAAjB,GAAA,cAAA,EACAgB,GAAAE,GAAA,QAAA,wBAAA,SAAAC,GACA,IAAAA,EAAAC,SAAAJ,EAAAK,KAAA,6BAAAC,UACAJ,GAAA,QAAA,eAAA,SAAAC,GACAA,EAAAI,gBACA,IAAAC,GAAAR,EAAAK,KAAA,yBACAI,EAAAT,EAAAK,KAAA,yBACAK,EAAAV,EAAAK,KAAA,qBAAAM,KAAA,WAAA,OAAA,MAEA,OAAA,IAAAH,EAAAI,OAAAC,MAAA,eAAAL,GAAAM,SACA,IAAAL,EAAAG,OAAAC,MAAA,cAAAJ,GAAAK,aAEA/B,GAAAgC,MACAC,KAAA,MAAAC,SAAA,QAAA/B,IAAA,iCACAgC,MAAAC,UAAAC,MAAAC,WAAAC,SAAAd,EAAAI,MAAAW,SAAAd,EAAAG,MAAAY,UAAA,GAAAC,WAAAf,KACAgB,QAAA,SAAAC,GACA,OAAAA,EAAAC,QACA,IAAA,KAAAzC,OAAAC,SAAAyC,QAAA,MACA,KAAA,MAAAhB,MAAAc,EAAAG,aAMAC,UAAA,SAAAhC,GACA,GAAAC,GAAAjB,EAAAkB,KACAlB,GAAAgC,MACAC,KAAA,MAAAC,SAAA,QAAA/B,IAAA,kCACAwC,QAAA,SAAAC,GACA,MAAAA,EAAAC,QACA5B,EAAAK,KAAA,YAAA2B,OACAhC,EAAAK,KAAA,kBAAA4B,OACAjC,EAAAK,KAAA,UAAA6B,KAAAP,EAAAL,UACAtB,EAAAiC,OACAjC,EAAAK,KAAA,UAAAA,KAAA,OAAAM,KAAA,MAAAgB,EAAAQ,UAAAC,MAAAT,EAAAL,UACAtB,EAAAK,KAAA,mBAAAM,KAAA,MAAAgB,EAAAQ,UACAnC,EAAAK,KAAA,gBAAA6B,KAAAP,EAAAL,UACA,GAAAtC,EAAA,aACAD,EAAA,aAAA4B,KAAA,OAAA,uCAAAlB,EAAA,QAAAkC,EAAAU,QACA,GAAArD,EAAA,iBACAD,EAAA,aAAA4B,KAAA,OAAA,uCAAAlB,EAAA,QAAAkC,EAAAU,OAAA,aAAArD,EAAA,cAEAD,EAAA,aAAA4B,KAAA,OAAA,uCAAAlB,EAAA,QAAAkC,EAAAU,OAAA,aAAArD,EAAA,oBAGAgB,EAAAK,KAAA,YAAA4B,OACAjC,EAAAK,KAAA,kBAAA2B,OACAjD,EAAA,aAAAuB,MAAA,SAAAH,GAAAA,EAAAI,iBAAAM,MAAA,iBAEA9B,EAAAI,QAAAmD,OAAA,WACA,GAAAC,GAAAxD,EAAAI,QAAAqD,QAAAC,EAAA1D,EAAA,UAAA2D,YAAA,GAAA3D,EAAA,UAAA2D,YAAA,GAAA,EACAH,GAAAE,EAAA,KAAA1D,EAAA,WAAAyD,MAAAD,EAAAE,GAAApC,KAAA,YAAAmC,MAAAD,EAAAE,EAAA,MACAE,QAAA,aAIA5D,EAAA,mBAAAuB,MAAA,SAAAH,GACAA,EAAAI,iBACAxB,EAAAgC,MAAAC,KAAA,MAAA9B,IAAA,kCAAA+B,SAAA,QAAAS,QAAA,SAAAC,GAAAxC,OAAAC,SAAAyC,cAGA9C,EAAA,YAAA6D,MAAA,SAAAzC,GAAA,IAAAA,EAAAC,SAAArB,EAAA,aAAAuB,UACAN,EAAAE,GAAA,QAAA,YAAA,SAAAC,GACAA,EAAAI,gBACA,IAAAC,GAAAR,EAAAK,KAAA,yBACAI,EAAAT,EAAAK,KAAA,yBACAK,EAAA,MAEA,OAAA,IAAAF,EAAAI,OAAAC,MAAA,eAAAL,GAAAM,SACA,IAAAL,EAAAG,OAAAC,MAAA,cAAAJ,GAAAK,aAEA/B,GAAAgC,MACAC,KAAA,MAAAC,SAAA,QAAA/B,IAAA,iCACAgC,MAAAC,UAAAC,MAAAC,WAAAC,SAAAd,EAAAI,MAAAW,SAAAd,EAAAG,MAAAY,UAAA,GAAAC,WAAAf,KACAgB,QAAA,SAAAC,GACA,OAAAA,EAAAC,QACA,IAAA,KAAAzC,OAAAC,SAAAyC,QAAA,MACA,KAAA,MAAAhB,MAAAc,EAAAG,aAMAe,SAAA,SAAA9C,GACA,GAAA+C,GAAA/D,EAAA,gBAAAmC,KAAA,QACA6B,EAAA,GAAA/D,EAAA,aAAA,EAAAA,EAAA,YACAD,GAAAgC,MACAC,KAAA,MAAAC,SAAA,QAAA/B,IAAA,yCACAgC,MAAAC,UAAAC,MAAAC,WAAA2B,SAAAD,EAAAE,WAAAH,KACApB,QAAA,SAAAC,GACA,MAAAA,EAAAC,QACA7C,EAAA,eAAAmE,SACAnE,EAAA,gBAAA4B,KAAA,MAAAgB,EAAAzC,KAAA+C,OACAlD,EAAA,WAAAmD,KAAA,QAAAP,EAAAU,QACAtD,EAAA,QAAAoE,SAAA,gBACApE,EAAA,kBAAAqE,YAAA,sBAEArE,EAAA,eAAAkD,aAOAlD,EAAA,eAAAe,kBACAf,EAAA,UAAAgD,YACAhD,EAAA,eAAA8D,WAEA9D,EAAAsE,UAAAnD,GAAA,QAAA,WAAA,SAAAC,GACAA,EAAAI,iBACApB,OAAAC,SAAAC,KAAA,oEAAAiE,UAAAnE,OAAAC,SAAAC,QACAa,GAAA,QAAA,aAAA,SAAAC,GACAA,EAAAI,iBACApB,OAAAC,SAAAC,KAAA,sEAAAiE,UAAAnE,OAAAC,SAAAC,QACAa,GAAA,QAAA,eAAA,SAAAC,GACAA,EAAAI,iBACApB,OAAAC,SAAAC,KAAA,wEAAAiE,UAAAnE,OAAAC,SAAAC,UC9HA,SAAAN,GACA,GAAAwE,GAAAxE,EAAA,gBAAAyE,EAAAD,EAAArC,KAAA,QACAuC,GACAC,YAAA,WACA,GAAAC,GAAA5E,EAAAI,QAAAyE,SAAA,EACAD,GAAA,IACA5E,EAAA,QAAA8E,KAAAC,aAAA,OAAAF,OAAA,UAEA7E,EAAA,QAAA8E,KAAAC,aAAA,GAAAF,OAAA,MAGAG,YAAA,WACA,GAAAC,GAAAjF,EAAA,aACA4E,EAAA5E,EAAAI,QAAAyE,SAAA,GACAK,EAAAlF,EAAAI,QAAAqD,QAAAe,EAAAxE,EAAA,gBAAAmF,EAAAF,EAAA9C,KAAA,SACA8C,GAAAH,KAAAD,OAAAD,EAAAnB,MAAA,SAEAyB,EAAA,MACAlF,EAAA,kBAAAqE,YAAA,OACArE,EAAA,QAAA8E,IAAA,aAAA,UAEA9E,EAAA,kBAAAoE,SAAA,OACApE,EAAA,QAAA8E,IAAA,aAAA,KAEAF,EAAA5E,EAAAI,QAAAyE,SAAA,GACAI,EAAAH,KAAAM,IAAA,GAAAP,OAAAD,IACAJ,EAAAM,KACArB,MAAAmB,EAAA,EAAA,EAAA,KACAC,OAAAD,EAAA,OAEA,IAAAS,SAAAF,KACAnF,EAAA,kBAAAqE,YAAA,OACArE,EAAA,QAAA8E,IAAA,aAAA,IACAI,EAAA,MACAD,EAAAH,IAAA,MAAA,KACA9E,EAAA,UAAAiD,OACA2B,EAAA5E,EAAAI,QAAAyE,WAEAI,EAAAH,IAAA,MAAA,IACA9E,EAAA,UAAAkD,OACA0B,EAAA5E,EAAAI,QAAAyE,SAAA,IAEAI,EAAAH,IAAA,QAAAI,EAAA,MACAV,EAAAM,KACArB,MAAAyB,EAAA,KACAL,OAAAD,EAAA,SAIAU,WAAA,WACAtF,EAAAgC,MACAC,KAAA,MAAAC,SAAA,QAAA/B,IAAA,kCACAwC,QAAA,SAAAC,GACA,OAAAA,EAAAC,QAEA7C,EAAA,YAAAqE,YAAA,QACAG,EAAA5C,KAAA,MAAA6C,GAAAvB,OACAlD,EAAA,QAAAiD,OACAyB,EAAAM,cACAhF,EAAAI,QAAAmD,OAAA,WACAmB,EAAAM,kBAGAhF,EAAA,YAAAoE,SAAA,QACAM,EAAAC,cACA3E,EAAAI,QAAAmD,OAAA,WACAmB,EAAAC,qBAMAY,KAAA,WACArE,KAAAoE,cAGAZ,GAAAa,QACAC,QC7EA,SAAAxF,GACA,GAAAwE,GAAAxE,EAAA,gBAAAyE,EAAAD,EAAArC,KAAA,QACAuC,GACAY,WAAA,WACAtF,EAAAgC,MACAC,KAAA,MAAAC,SAAA,QAAA/B,IAAA,kCACAwC,QAAA,SAAAC,GACA,OAAAA,EAAAC,OAEA2B,EAAA5C,KAAA,MAAA6C,GAAAvB,QAEAlD,EAAA,sBAAAkD,OACAlD,EAAA,oBAAAkD,YAKAqC,KAAA,WACArE,KAAAoE,cAGAZ,GAAAa,QACAC","file":"main.min.js","sourcesContent":["$(function () {\r\n  var urlParam = function (name, url) {\r\n    if (!url) { url = window.location.href; }\r\n    var results = new RegExp('[\\\\?&]' + name + '=([^&#]*)').exec(url);\r\n    return results ? results[1] : 0;\r\n  };\r\n\r\n  var urlName=window.location.pathname.split(\"/\")[2];\r\n  $.fn.extend({\r\n    loginiframeForm: function (options) {\r\n      var $this = $(this),server_id = urlParam(\"server_id\") || '';\r\n      $this.on(\"keyup\",\".ui-passport-password\",function (event) {\r\n        if (event.keyCode == 13) {$this.find(\".ui-passport-login-button\").click();}\r\n      }).on(\"click\",\".iframeLogin\",function (event) {\r\n        event.preventDefault();\r\n        var $userName = $this.find(\".ui-passport-userName\");\r\n        var $passWord = $this.find(\".ui-passport-password\");\r\n        var YearNone = $this.find(\"#persistentcookie\").attr(\"checked\")?\"Year\":\"None\";\r\n\r\n        if ($userName.val() == '') {alert('请填写用户名！'); $userName.focus(); return;}\r\n        if ($passWord.val() == '') {alert('请填写密码！'); $passWord.focus(); return;}\r\n\r\n        $.ajax({\r\n          type: \"GET\",dataType: \"jsonp\",url: \"//i.gamersky.com/api/userlogin\",\r\n          data: {logindata: JSON2.stringify({username:$userName.val(), password:$passWord.val(), checkcode:'', expiration:YearNone})},\r\n          success: function (responseJson) {\r\n            switch (responseJson.status) {\r\n              case \"ok\": window.location.reload(); break;\r\n              case \"err\": alert(responseJson.body); break;\r\n            }\r\n          }\r\n        });\r\n      });\r\n    },\r\n    loginUser: function (options) {\r\n      var $this = $(this);\r\n      $.ajax({\r\n        type: \"GET\",dataType: \"jsonp\",url: \"//i.gamersky.com/api/logincheck\",\r\n        success: function (responseJson) {\r\n          if (responseJson.status == \"ok\") {\r\n            $this.find(\".regeidt\").hide();\r\n            $this.find(\".login,.Logout\").show();\r\n            $this.find(\"#Uname\").html(responseJson.username);\r\n            $this.show();\r\n            $this.find(\".uname\").find(\"img\").attr(\"src\", responseJson.userface).after(responseJson.username);\r\n            $this.find(\".user1 .img img\").attr(\"src\", responseJson.userface);\r\n            $this.find(\".user1 .name\").html(responseJson.username);\r\n            if (urlParam(\"server_id\") == 0) {\r\n              $(\".Recharge\").attr(\"href\", \"http://pay.gamersky.com/pay/?gameid=\"+urlName+\"&uid=\"+responseJson.userid);\r\n            }else if (urlParam(\"pay_server_id\") == 0) {\r\n              $(\".Recharge\").attr(\"href\", \"http://pay.gamersky.com/pay/?gameid=\"+urlName+\"&uid=\"+responseJson.userid+\"&serverid=\"+urlParam(\"server_id\"));\r\n            }else{\r\n              $(\".Recharge\").attr(\"href\", \"http://pay.gamersky.com/pay/?gameid=\"+urlName+\"&uid=\"+responseJson.userid+\"&serverid=\"+urlParam(\"pay_server_id\"));\r\n            }\r\n          } else {\r\n            $this.find(\".regeidt\").show();\r\n            $this.find(\".login,.Logout\").hide();\r\n            $(\".Recharge\").click(function (event){event.preventDefault();alert(\"请先登录，再来充值！\");});\r\n          }\r\n          $(window).resize(function(){\r\n            var WW=$(window).width(),TW=$(\".Top_L\").outerWidth(true)+$(\".Top_R\").outerWidth(true)+10;\r\n            if(WW-TW<800){$(\".Notice\").width(WW-TW).find(\".gonggao\").width(WW-TW-80);}\r\n          }).trigger(\"resize\");\r\n        }\r\n      });\r\n\r\n      $(\"#Logout,.Logout\").click(function (event){\r\n        event.preventDefault();\r\n        $.ajax({ type: \"GET\", url: \"//i.gamersky.com/api/userlogout\", dataType: \"jsonp\", success: function (responseJson) { window.location.reload(); } });\r\n      });\r\n\r\n      $(\".regeidt\").keyup(function (event){if (event.keyCode == 13){$(\"#BtnLogin\").click();}});\r\n      $this.on(\"click\",\"#BtnLogin\",function (event) {\r\n        event.preventDefault();\r\n        var $userName = $this.find(\".ui-passport-userName\");\r\n        var $passWord = $this.find(\".ui-passport-password\");\r\n        var YearNone = \"None\";\r\n\r\n        if ($userName.val() == '') {alert('请填写用户名！'); $userName.focus(); return;}\r\n        if ($passWord.val() == '') {alert('请填写密码！'); $passWord.focus(); return;}\r\n        \r\n        $.ajax({\r\n          type: \"GET\",dataType: \"jsonp\",url: \"//i.gamersky.com/api/userlogin\",\r\n          data: {logindata: JSON2.stringify({username:$userName.val(), password:$passWord.val(), checkcode:'', expiration:YearNone})},\r\n          success: function (responseJson) {\r\n            switch (responseJson.status) {\r\n              case \"ok\": window.location.reload(); break;\r\n              case \"err\": alert(responseJson.body); break;\r\n            }\r\n          }\r\n        });\r\n      });\r\n    },\r\n    GameLink: function (options) {\r\n      var datagame = $(\".gamesIframe\").data(\"game\");\r\n      var server_id=urlParam(\"server_id\")==0?1:urlParam(\"server_id\");\r\n      $.ajax({\r\n        type: \"GET\",dataType: \"jsonp\",url: \"//i.gamersky.com/api/LoginGeneralGamer\",\r\n        data: {logindata: JSON2.stringify({ serverid: server_id,configType:datagame})},\r\n        success: function (responseJson) {\r\n          if (responseJson.status == \"ok\") {\r\n            $(\".gamesLogin\").remove();\r\n            $(\".gamesIframe\").attr(\"src\", responseJson.url).show();\r\n            $(\"#GameID\").html(\"玩家ID:\" + responseJson.userid);\r\n            $('html').addClass('yyzq-logined');\r\n            $('.gameAreaInfos').removeClass('gameAreaInfosHide');\r\n          }else{\r\n            $(\".gamesLogin\").show();\r\n          }\r\n        }\r\n      });\r\n    }\r\n  });\r\n\t\r\n  $(\".User-login\").loginiframeForm();//游戏页用户登录\r\n  $(\".Login\").loginUser();\r\n  $(\".gamesLogin\").GameLink();//登录之后游戏载入\r\n\t\r\n  $(document).on(\"click\",\"#qqLogin\",function (event){\r\n    event.preventDefault();\r\n    window.location.href=\"//i.gamersky.com/oauth/authorizelogin?authorizetype=qq&returnUrl=\"+encodeURI(window.location.href);\r\n  }).on(\"click\",\"#sinaLogin\",function (event){\r\n    event.preventDefault();\r\n    window.location.href=\"//i.gamersky.com/oauth/authorizelogin?authorizetype=sina&returnUrl=\"+encodeURI(window.location.href);\r\n  }).on(\"click\",\"#weixinLogin\",function (event){\r\n    event.preventDefault();\r\n    window.location.href=\"//i.gamersky.com/oauth/authorizelogin?authorizetype=weixin&returnUrl=\"+encodeURI(window.location.href);\r\n  });\r\n});","(function ($) {\r\n    var $iframe = $('.gamesIframe'),gameUrl = $iframe.data('game');\r\n    var yygame = {\r\n        setBodySize:function () {\r\n            var wh = $(window).height() - 36;\r\n            if(wh<800){\r\n                $('body').css({'overflow-y':'auto','height':'800px'});\r\n            }else{\r\n                $('body').css({'overflow-y':'','height':''});\r\n            }\r\n        },\r\n        setGameSize:function () {\r\n            var $gamearea = $('.gameArea'),\r\n                wh = $(window).height() - 36,\r\n                ww = $(window).width(),$iframe = $('.gamesIframe'),screenOri = $gamearea.data('screen');\r\n            $gamearea.css({'height':wh,'width':'100%'});\r\n\r\n            if(ww<1280){\r\n                $('.gameAreaInfos').removeClass('cur');\r\n                $('html').css('overflow-x','auto');\r\n            }else{\r\n                $('.gameAreaInfos').addClass('cur');\r\n                $('html').css('overflow-x','');\r\n            }\r\n            wh = $(window).height() - 36;\r\n            $gamearea.css({'top':'','height':wh});\r\n            $iframe.css({\r\n                width:wh/5*3+'px',\r\n                height:wh+'px'\r\n            });\r\n            if(parseInt(screenOri) === 1){\r\n                $('.gameAreaInfos').removeClass('cur');\r\n                $('html').css('overflow-x','');\r\n                if(ww<1280){\r\n                    $gamearea.css('top','0');\r\n                    $('#QZnav').hide();\r\n                    wh = $(window).height();\r\n                }else{\r\n                    $gamearea.css('top','');\r\n                    $('#QZnav').show();\r\n                    wh = $(window).height() - 36;\r\n                }\r\n                $gamearea.css('width',ww+'px');\r\n                $iframe.css({\r\n                    width:ww+'px',\r\n                    height:wh+'px'\r\n                });\r\n            }\r\n        },\r\n        checklogin:function () {\r\n            $.ajax({\r\n                type: \"GET\", dataType: \"jsonp\", url: \"//i.gamersky.com/api/logincheck\",\r\n                success: function (responseJson) {\r\n                    if (responseJson.status === \"ok\") {\r\n                        //如已登录跳转直接开始游戏\r\n                        $('.QZlogin').removeClass('show');\r\n                        $iframe.attr('src',gameUrl).show();\r\n                        $('.Bot').hide();\r\n                        yygame.setGameSize();\r\n                        $(window).resize(function () {\r\n                            yygame.setGameSize();\r\n                        });\r\n                    }else{\r\n                        $('.QZlogin').addClass('show');\r\n                        yygame.setBodySize();\r\n                        $(window).resize(function () {\r\n                            yygame.setBodySize();\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        init:function () {\r\n            this.checklogin();\r\n        }\r\n    };\r\n    yygame.init();\r\n})(jQuery);","(function ($) {\r\n    var $iframe = $('.gamesIframe'),gameUrl = $iframe.data('game');\r\n    var yygame = {\r\n        checklogin:function () {\r\n            $.ajax({\r\n                type: \"GET\", dataType: \"jsonp\", url: \"//i.gamersky.com/api/logincheck\",\r\n                success: function (responseJson) {\r\n                    if (responseJson.status === \"ok\") {\r\n                        //如已登录跳转直接开始游戏\r\n                        $iframe.attr('src',gameUrl).show();\r\n                    }else{\r\n                        $(\".gsZpPopLoginClose\").show();\r\n                        $(\".gs_zp_pop_login\").show();\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        init:function () {\r\n            this.checklogin();\r\n        }\r\n    };\r\n    yygame.init();\r\n})(jQuery);"]}