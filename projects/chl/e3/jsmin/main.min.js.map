{"version":3,"sources":["main.js"],"names":["$","e3","getQueryString","name","reg","RegExp","r","window","location","search","substr","match","unescape","swpTop","Swiper","slidesPerView","centeredSlides","loop","swpList","each","$this","this","getWant","$gameList","gidArr","gid","data","push","ajax","type","dataType","url","Idlist","success","status","res","result","i","item","gameId","find","html","wantplayCount","BriefingInit","setNav","bfSel","addClass","openTab","$tab","$navs","$items","on","idx","index","removeClass","eq","initLive","addTop","createLsTopDom","cmn","tmpDom","LsTopData","state","title","time","commentid","LsTopDom","LsTop","LsMain","LsSelData","topic_source_id","responseJson","comments","getData","size","page","sort","callback","JsonData","action","generalId","orderSort","jsondata","JSON2","stringify","createItemDom","dt","inputtime","describe","list","length","tmpPics","uploadList","replace","createListDom","addListDom","moreBtn","isLoading","pageNow","pageSize","pageSort","moreRes","$list","append","totalCount","initLiveStart","total","sortBtn","hasClass","popPic","showPop","arr","popDom","$pop","setTimeout","initialSlide","pagination","paginationType","onSlideChangeEnd","swiper","attr","activeIndex","remove","ev","stopPropagation","picsListArr","$dad","closest","picsListTmp","split","addComment","$comm","commDom","getScript","Date","getTime","LsData","initNews","getListData","pg","jsData","isCache","cacheTime","specialId","isSpecialId","templatekey","tmk","beforeSend","$moreBtn","totalPage","totalPages","liHtml","body","indexOf","initPage","$news","hide","cycm","$newsArea","_this","pgNow","LiveStreamData","getMoreList","moreEvents","specPage","parseInt","$area","specId","specIs","specTmk","$more","pagePosition","$page","pos","$nav","init","jQuery"],"mappings":"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","file":"main.min.js","sourcesContent":["(function($){\r\n    var e3 = {\r\n        getQueryString:function(name) {\r\n            var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\");\r\n            var r = window.location.search.substr(1).match(reg);\r\n            if (r != null) return unescape(r[2]);\r\n            return null;\r\n        },\r\n        swpTop:function(){\r\n            var swpTop = new Swiper('.gsE3SwpTop', {\r\n                slidesPerView:'auto',\r\n                centeredSlides : true,\r\n                loop : true\r\n            })\r\n        },\r\n        swpList:function(){\r\n            $('.gsE3SwpList').each(function () {\r\n                var $this = $(this);\r\n                var swpList = new Swiper($this, {\r\n                    slidesPerView:'auto'\r\n                });\r\n            });\r\n        },\r\n        getWant:function(){\r\n            var $gameList = $('.gsE3game'),gidArr = [];\r\n            $gameList.each(function () {\r\n                var gid = $(this).data('lib');\r\n                gidArr.push(gid);\r\n            });\r\n            $.ajax({\r\n                type: \"GET\",\r\n                dataType: \"jsonp\",\r\n                url: \"//cm1.gamersky.com/apirating/getwanrating\",\r\n                data: { 'Idlist': gidArr+\"\"},\r\n                success: function (data) {\r\n                    if (data.status === 'ok') {\r\n                        var res = data.result;\r\n                        $.each(res,function (i,item) {\r\n                            $('.gsE3game[data-lib='+item.gameId+']').find('.want i').html(item.wantplayCount);\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n\r\n        },\r\n        BriefingInit:function(){\r\n            var _this = this,bfSel = _this.getQueryString('bf'),pgNow = $('.gsE3LogoNav').data('now');\r\n            if(bfSel === null){\r\n                if(typeof pgNow !== \"undefined\" && pgNow !== ''){\r\n                    bfSel = pgNow;\r\n                }else{\r\n                    bfSel = 'ea';\r\n                }\r\n            }\r\n            var LsData = window.LiveStreamData;\r\n            function setNav(){\r\n                $('.logoNavs[data-pgkey='+bfSel+']').addClass('cur');\r\n            }\r\n            function openTab(){\r\n                var $tab = $('.gsE3Tab'),\r\n                    $navs = $tab.find('.gsE3TabNav'),\r\n                    $items = $tab.find('.gsE3TabItem');\r\n                $navs.find('a').on('click',function () {\r\n                    var $this = $(this),idx = $this.index();\r\n                    $navs.find('a').removeClass('cur').eq(idx).addClass('cur');\r\n                    $items.removeClass('cur').eq(idx).addClass('cur');\r\n                });\r\n            }\r\n            function initLive(){\r\n                var LsMain = $('#liveStream'),\r\n                    LsSelData = LsData[bfSel],\r\n                    $list = LsMain.find('.liveStreamList'),\r\n                    totalCount,\r\n                    pageNow = 1,\r\n                    pageSize = 10,\r\n                    pageSort = 'desc',\r\n                    isLoading = false;\r\n                function addTop() {\r\n                    var LsTop = LsMain.find('.liveStreamTop'),\r\n                        LsTopDom,\r\n                        LsTopData = LsSelData;\r\n                    function createLsTopDom(cmn){\r\n                        var tmpDom = '';\r\n                        tmpDom += '<div class=\"ls-top-state\"><span>'+LsTopData.state+'</span></div>';\r\n                        tmpDom += '<div class=\"ls-top-infos\">';\r\n                        tmpDom += '<h5>'+LsTopData.title+'</h5>';\r\n                        tmpDom += '<p><span>'+LsTopData.location+'</span><span>'+LsTopData.time+'</span><span>评论：<i class=\"LsComment\" data-commid=\"'+LsTopData.commentid+'\">'+cmn+'</i></span></p>';\r\n                        return tmpDom;\r\n                    }\r\n                    LsTopDom = createLsTopDom('--');\r\n                    LsTop.html(LsTopDom);\r\n                    $.ajax({\r\n                        type: \"GET\",\r\n                        url: \"//cm.gamersky.com/commentapi/count\",\r\n                        dataType: \"jsonp\",\r\n                        data: {\r\n                            topic_source_id: LsTopData.commentid\r\n                        },\r\n                        success: function (responseJson) {\r\n                            $('.LsComment').html(responseJson.result[LsTopData.commentid].comments);\r\n                        }\r\n                    });\r\n                }\r\n                function getData(size,page, sort, callback) {\r\n                    var JsonData = {\r\n                        action: \"getlivedatabypage\",\r\n                        generalId: LsSelData.commentid,\r\n                        page: page,\r\n                        size: size,\r\n                        orderSort: sort\r\n                    };\r\n                    $.ajax({\r\n                        type: \"GET\",\r\n                        url: \"//db5.gamersky.com/GraphicLiveAjax.aspx\",\r\n                        dataType: \"jsonp\",\r\n                        data: {jsondata:JSON2.stringify(JsonData)},\r\n                        success: function (data) {\r\n                            if (data.status === 'ok' && typeof callback === \"function\") {\r\n                                callback(data);\r\n                            }\r\n\r\n                        }\r\n                    });\r\n                }\r\n                function createItemDom(dt){\r\n                    var tmpDom = '';\r\n                    tmpDom += '';\r\n                    tmpDom += '<div class=\"live-stream-list-item\">';\r\n                    tmpDom += '<div class=\"lsli-time\"><i></i>'+dt.inputtime+'</div>';\r\n                    tmpDom += '<div class=\"lsli-des\">'+dt.describe+'</div>';\r\n                    if(dt.list.length >0){\r\n                        var tmpPics = dt.uploadList+'';\r\n                        tmpPics = tmpPics.replace(/http:\\/\\//g,'//');\r\n                        tmpDom += '<div class=\"liveStreamPicList lsli-pics lsli-pics-num'+dt.list.length+'\" data-piclist=\"'+tmpPics+'\"><ul class=\"clearfix\">';\r\n                        $.each(dt.uploadList,function (i,item) {\r\n                            item = item.replace('http://','//');\r\n                            tmpDom += '<li><a class=\"liveStreamPic\" data-idx=\"'+i+'\"><img src=\"'+item+'_550.jpg\" alt=\"LivePics\"></a></li>';\r\n                        });\r\n                        tmpDom += '</ul></div>';\r\n                    }\r\n                    tmpDom += '</div>';\r\n                    return tmpDom;\r\n                }\r\n                function createListDom(dt){\r\n                    var tmpDom = '';\r\n                    tmpDom += '';\r\n                    tmpDom += '<div class=\"live-stream-list-items gsE3LslItems\">';\r\n                    $.each(dt,function (i,item) {\r\n                        tmpDom += createItemDom(item);\r\n                    });\r\n                    tmpDom += '</div>';\r\n                    tmpDom += '<a class=\"live-stream-list-more gsE3LslMore\">查看更多内容</a>';\r\n                    return tmpDom;\r\n                }\r\n                function addListDom(dt){\r\n                    var tmpDom = '';\r\n                    tmpDom += '';\r\n                    $.each(dt,function (i,item) {\r\n                        tmpDom += createItemDom(item);\r\n                    });\r\n                    return tmpDom;\r\n                }\r\n                function moreBtn(){\r\n                    $('.gsE3LslMore').on('click',function () {\r\n                        var $this = $(this);\r\n                        if(isLoading === false){\r\n                            isLoading = true;\r\n                            pageNow++;\r\n                            $this.html('正在加载...');\r\n                            getData(pageSize , pageNow , pageSort , function (moreRes) {\r\n                                $list.find('.gsE3LslItems').append(addListDom(moreRes.result));\r\n                                if(pageNow*pageSize >= totalCount){\r\n                                    $this.html('全部加载完成');\r\n                                }else{\r\n                                    isLoading = false;\r\n                                    $this.html('查看更多内容');\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n                function initLiveStart() {\r\n                    getData(pageSize , pageNow , pageSort , function (res) {\r\n                        totalCount = res.total;\r\n                        if(res.result.length<1){\r\n                            $list.html('<div style=\"height: 1rem;line-height: 1rem;font-size: 0.24rem;color:#888;text-align: center;border-bottom: 1px solid #f5f5f5;\">直播尚未开始</div>');\r\n                        }else{\r\n                            $list.html(createListDom(res.result));\r\n                            moreBtn();\r\n                        }\r\n                    });\r\n                }\r\n                function sortBtn(){\r\n                    $('.liveStreamSort').on('click',function () {\r\n                        var $this = $(this);\r\n                        if($this.hasClass('desc') === true){\r\n                            //列表切换成正序\r\n                            $this.removeClass('desc').addClass('asc').find('i').html('正序');\r\n                            pageNow = 1;\r\n                            pageSort = 'asc';\r\n                        }else{\r\n                            //列表切换成倒序\r\n                            $this.removeClass('asc').addClass('desc').find('i').html('倒序');\r\n                            pageNow = 1;\r\n                            pageSort = 'desc';\r\n                        }\r\n                        initLiveStart();\r\n                    });\r\n                }\r\n                function popPic(){\r\n                    function showPop(idx,arr){\r\n                        var popDom ='';\r\n                        popDom += '';\r\n                        popDom += '<div class=\"gs-e3-pop-mask gepPop gepPopClose\"></div>';\r\n                        popDom += '<div class=\"gs-e3-pop-main gepPop gepPopClose\">';\r\n\r\n                        if(arr.length>1){\r\n                            popDom += '<div class=\"gs-e3-pop-pics\">';\r\n                            popDom += '<div class=\"swiper-container gepPopSwp\"><div class=\"swiper-wrapper\">';\r\n                            $.each(arr,function (i,item) {\r\n                                popDom += '<div class=\"swiper-slide\">';\r\n                                popDom += '<img src=\"'+item+'_550.jpg\" alt=\"LivePicPop\">';\r\n                                popDom += '</div>';\r\n                            });\r\n                            popDom += '</div></div>';\r\n                            popDom += '</div>';\r\n                        }else{\r\n                            popDom += '<div class=\"gs-e3-pop-pic\">';\r\n                            popDom += '<img src=\"'+arr[0]+'_550.jpg\" alt=\"LivePicPop\">';\r\n                            popDom += '</div>';\r\n                        }\r\n\r\n                        popDom += '<div class=\"gs-e3-pop-bar\">';\r\n                        popDom += '<a class=\"gs-e3-pop-back gepPopClose\"></a>';\r\n                        popDom += '<a class=\"gs-e3-pop-look gepPopLook\" target=\"_blank\" href=\"//www.gamersky.com/showimage/id_gamersky.shtml?'+arr[idx]+'_1920.jpg\"></a>';\r\n                        if(arr.length>1){\r\n                            popDom += '<div class=\"swiper-pagination-custom\"></div>'\r\n                        }\r\n                        popDom += '</div>';\r\n\r\n                        popDom += '</div>';\r\n                        $('body').append(popDom);\r\n                        var $pop = $('.gepPop');\r\n                        setTimeout(function () {\r\n                            $pop.addClass('cur');\r\n                        },50);\r\n                        var popSwp = new Swiper('.gepPopSwp',{\r\n                            initialSlide :idx,\r\n                            pagination : '.swiper-pagination-custom',\r\n                            paginationType : 'fraction',\r\n                            onSlideChangeEnd: function(swiper){\r\n                                $pop.find('.gepPopLook').attr('href','//www.gamersky.com/showimage/id_gamersky.shtml?'+arr[swiper.activeIndex]+'_1920.jpg');\r\n                            }\r\n                        });\r\n                        $('.gepPopClose').on('click',function () {\r\n                            $pop.removeClass('cur');\r\n                            setTimeout(function () {\r\n                                $pop.remove();\r\n                            },250);\r\n                        });\r\n                        $pop.find('a').on('click',function (ev) {\r\n                            ev.stopPropagation();\r\n                        });\r\n                    }\r\n                    $list.on('click','.liveStreamPic',function () {\r\n                        var $this = $(this),\r\n                            $dad = $this.closest('.liveStreamPicList'),\r\n                            picsListTmp = $dad.data('piclist'),\r\n                            picsListArr,\r\n                            idx = $this.data('idx');\r\n                        picsListArr = picsListTmp.split(',');\r\n                        showPop(idx,picsListArr);\r\n                    });\r\n                }\r\n                function addComment(){\r\n                    var $comm = LsMain.find('.liveStreamComment'),commDom = '';\r\n                    commDom += '<div id=\"SOHUCS\" sid=\"'+LsSelData.commentid+'\"></div>';\r\n                    $comm.html(commDom);\r\n                    $.getScript('//j.gamersky.com/web2015/comment/wapjs/jquery.commentconfig.js?' + new Date().getTime());\r\n                }\r\n                initLiveStart();\r\n                addTop();\r\n                sortBtn();\r\n                popPic();\r\n                addComment();\r\n            }\r\n            function initNews(){\r\n                var listDom = '',\r\n                    $newsArea = $('.gsE3NewsArea'),\r\n                    $news = $('.gsE3News'),\r\n                    $moreBtn = $newsArea.find('.gsE3MoreBrief'),\r\n                    LsSelData = LsData[bfSel],totalPage,initPage = 1,isLoading = false;\r\n                function getListData(pg) {\r\n                    var jsData = {\r\n                        type: \"getwapspecialpage\",\r\n                        isCache: true,\r\n                        cacheTime: 60,\r\n                        specialId: 3811,\r\n                        isSpecialId: true,\r\n                        templatekey: LsSelData.tmk,\r\n                        page: pg\r\n                    };\r\n                    $.ajax({\r\n                        type: \"GET\",\r\n                        dataType: \"jsonp\",\r\n                        url: \"//db2.gamersky.com/LabelJsonpAjax.aspx\",\r\n                        data: {jsondata: JSON2.stringify(jsData)},\r\n                        beforeSend: function() {\r\n                            $moreBtn.addClass('loading').html('加载中');\r\n                        },\r\n                        success: function(data) {\r\n                            if (data.status = 'ok') {\r\n                                isLoading = false;\r\n                                totalPage = data.totalPages;\r\n                                var liHtml = data.body;\r\n                                if(data.body.indexOf('没有任何记录')>0 && initPage === 1){\r\n                                    liHtml = '<li style=\"text-align: center;line-height: 1.4rem;font-size: 0.24rem;color:#888;\">没有任何记录</li>';\r\n                                    $news.append(liHtml);\r\n                                    $moreBtn.hide();\r\n                                }else{\r\n                                    $news.append(liHtml);\r\n                                    $moreBtn.removeClass('loading').html('查看更多资讯');\r\n                                    $(\".cy_comment\").cycm();\r\n                                    if(initPage === totalPage){\r\n                                        $moreBtn.addClass('loaded').html('全部加载完成');\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                $moreBtn.on('click',function () {\r\n                    if(isLoading === false){\r\n                        isLoading = true;\r\n                        initPage++;\r\n                        if(initPage <= totalPage){\r\n                            getListData(initPage);\r\n                        }\r\n                    }\r\n                });\r\n                //初始化\r\n                getListData(initPage);\r\n            }\r\n            setNav();\r\n            openTab();\r\n            initLive();\r\n            initNews();\r\n        },\r\n        getMoreList:function(){\r\n            var $more = $('.gsE3More'),\r\n                $area = $more.closest('.gsE3MoreArea'),\r\n                $list = $area.find('.gsE3MoreList'),\r\n                specId = $area.data('specialid'),\r\n                specIs = $area.data('isspecialid'),\r\n                specTmk = $area.data('templatekey'),\r\n                totalPage,isLoading = false;\r\n            function moreEvents() {\r\n                var specPage = parseInt($area.attr('data-page'))+1;\r\n                var jsData = {\r\n                    type: \"getwapspecialpage\",\r\n                    isCache: true,\r\n                    cacheTime: 60,\r\n                    specialId: specId,\r\n                    isSpecialId: specIs,\r\n                    templatekey: specTmk,\r\n                    page: specPage\r\n                };\r\n                $.ajax({\r\n                    type: \"GET\",\r\n                    dataType: \"jsonp\",\r\n                    url: \"//db2.gamersky.com/LabelJsonpAjax.aspx\",\r\n                    data: {jsondata: JSON2.stringify(jsData)},\r\n                    beforeSend: function() {\r\n                        $more.addClass('loading').html('加载中');\r\n                    },\r\n                    success: function(data) {\r\n                        if (data.status = 'ok') {\r\n                            totalPage = data.totalPages;\r\n                            var liHtml = data.body;\r\n                            $list.append(liHtml);\r\n                            $more.removeClass('loading').html('查看更多资讯');\r\n                            $(\".cy_comment\").cycm();\r\n                            $area.attr('data-page',specPage);\r\n                            if(specPage === totalPage){\r\n                                $more.addClass('loaded').html('全部加载完成');\r\n                            }else{\r\n                                isLoading = false;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            $more.on('click',function () {\r\n                if(isLoading === false){\r\n                    isLoading = true;\r\n                    moreEvents();\r\n                }\r\n            });\r\n\r\n        },\r\n        pagePosition:function(){\r\n            var _this = this,$page = $('.gsE3Page'),pos = $page.data('pos'),\r\n                $nav = $page.find('.gsE3Nav');\r\n            // pos ： Index 首页 | Live 游民看E3 | Briefing 发布会\r\n            $nav.find('.gsE3Nav'+pos).addClass('cur');\r\n            if(pos === 'Index'){\r\n                _this.swpTop();\r\n                _this.swpList();\r\n                _this.getWant();\r\n                _this.getMoreList();\r\n            }else if(pos === 'Live'){\r\n                _this.getMoreList();\r\n            }else if(pos === 'Briefing'){\r\n                _this.BriefingInit();\r\n            }\r\n        },\r\n        init:function () {\r\n            this.pagePosition();\r\n        }\r\n    };\r\n    e3.init();\r\n})(jQuery);"]}