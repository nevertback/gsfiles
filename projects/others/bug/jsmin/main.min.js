!function(m){function t(){var t=m("#ycTab"),a=t.find(".swiper-slide-active").css("height");t.find(".swiper-wrapper").css("height",a)}var a=m("#SOHUCS").attr("sid");m.fn.GetNewWapComment=function(o){return this.each(function(){var o=(m(this),1),e=10,n={pageIndex:o,pageSize:e,articleId:a,isHot:!0};m.ajax({type:"get",dataType:"jsonp",url:"https://cm.gamersky.com/wapapi/getnewestcomment2",data:{jsondata:JSON2.stringify(n)},success:function(a){var a=m.parseJSON(a.body);if(commnet="<h4 class='ym-comm-title2'>全部评论</h4>",commnet+="<div class='ym-comm-sel'><a class='ym-comm-sel-new cur'>最新</a><a class='ym-comm-sel-early'>最早</a></div>",null!=a.NewComment&&(m(".ym-comm-floors-all").html(commnet),m(".ym-comm-floors-all").append(a.NewComment+a.Page)),o+1>Math.ceil(a.Count/a.PageSize)&&(m(".ym-comm-floors-all .ym-comm-btnwrap").addClass("ym-comm-btnwrap-all"),m(".ym-comm-floors-all .ym-comm-btn-more").html("全部加载完成")),a.Count>0||a.OneselfCount>0){var e=m(".ym-comm-new").next().attr("cmtid");m(".ym-comm-new").attr("cmtid",e)}m(".ym-comms-wrap > .ym-comm-floor").last().addClass("last"),m(".ym-comm-floor-inner-wrap").each(function(){m(this).find(".ym-comm-floor-inner").last().addClass("last")});var n=m(".ym-comm-floors-all"),s=n.find(".ym-comm-sel");s.find("a").on("click",function(t){t.preventDefault(),s.find("a").removeClass("cur"),m(this).addClass("cur"),1==m(this).index()?m(".ym-comm-floors-all").GetEarliestWapComment():m(".ym-comm-floors-all").GetNewWapComment()}),m(".ym-comm-floors-all .ym-comm-btn-more").attr("data-url","https://cm.gamersky.com/wapapi/getnewestcomment2").GetWapCommentMore(),newcomm.insertRe(),newcomm.txtMore(),like(),cycm(),t()}})})},m.fn.GetEarliestWapComment=function(o){return this.each(function(){var o=(m(this),1),e=10,n={pageIndex:o,pageSize:e,articleId:a,isHot:!0};m.ajax({type:"get",dataType:"jsonp",url:"https://cm.gamersky.com/wapapi/getearliestcomment2",data:{jsondata:JSON2.stringify(n)},success:function(a){var a=m.parseJSON(a.body);if(commnet="<h4 class='ym-comm-title2'>全部评论</h4>",commnet+=" <div class='ym-comm-sel'><a class='ym-comm-sel-new'>最新</a><a class='ym-comm-sel-early cur'>最早</a></div>",null!=a.NewComment&&(m(".ym-comm-floors-all").html(commnet),m(".ym-comm-floors-all").append(a.NewComment+a.Page)),o+1>Math.ceil(a.Count/a.PageSize)&&(m(".ym-comm-floors-all .ym-comm-btnwrap").addClass("ym-comm-btnwrap-all"),m(".ym-comm-floors-all .ym-comm-btn-more").addClass("cmt-loadallbtn cur").html("全部加载完成")),a.Count>0||a.OneselfCount>0){var e=m(".ym-comm-new").next().attr("cmtid");m(".ym-comm-new").attr("cmtid",e)}m(".ym-comms-wrap > .ym-comm-floor").last().addClass("last"),m(".ym-comm-floor-inner-wrap").each(function(){m(this).find(".ym-comm-floor-inner").last().addClass("last")});var n=m(".ym-comm-floors-all"),s=n.find(".ym-comm-sel");s.find("a").on("click",function(t){t.preventDefault(),s.find("a").removeClass("cur"),m(this).addClass("cur"),1==m(this).index()?m(".ym-comm-floors-all").GetEarliestWapComment():m(".ym-comm-floors-all").GetNewWapComment()}),m(".ym-comm-floors-all .ym-comm-btn-more").attr("data-url","https://cm.gamersky.com/wapapi/getearliestcomment2").GetWapCommentMore(),newcomm.insertRe(),newcomm.txtMore(),like(),cycm(),t()}})})},m.fn.GetWapComment=function(t){return this.each(function(){var t=(m(this),1),o=10,e={pageIndex:t,pageSize:o,articleId:a};m.ajax({type:"get",dataType:"jsonp",url:"https://cm.gamersky.com/wapapi/gethotcomment2",data:{jsondata:JSON2.stringify(e)},success:function(a){m("#SOHUCS").html("");var a=m.parseJSON(a.body);m("#SOHUCS").html(),1==t&&m("#SOHUCS").append(a.Login);var o="<div class='ym-comms-wrap'></div>";m("#SOHUCS").append(o),o="<div class='ym-comm-floors ym-comm-floors-hot'>",o+="<h4 class='ym-comm-title2'>热门评论</h4>",""!=a.HotComment&&(o+=a.HotComment,o+=a.Page),o+="</div>",(a.Count>0||a.OneselfCount>0)&&m(".ym-comms-wrap").append(o),t+1>Math.ceil(a.Count/a.PageSize)&&(m(".ym-comm-floors-hot .ym-comm-btnwrap").addClass("ym-comm-btnwrap-all"),m(".ym-comm-floors-hot .ym-comm-btn-more").html("全部加载完成")),m(".ym-comms-wrap").GetWapWholeComment(),m(".ym-comm-floors-hot .ym-comm-btn-more").attr("data-url","https://cm.gamersky.com/wapapi/gethotcomment2").GetWapHotCommentMore()}})})},m.fn.GetWapWholeComment=function(t){var o=1,e=10,n={pageIndex:o,pageSize:e,articleId:a};m.ajax({type:"get",dataType:"jsonp",url:"https://cm.gamersky.com/wapapi/getnewestcomment2",data:{jsondata:JSON2.stringify(n)},success:function(t){var t=m.parseJSON(t.body);t.IsClose?(m("#SOHUCS .ym-comms-wrap").remove(),m("#SOHUCS").append(t.Close)):0==t.Count&&0==t.OneselfCount&&m(".ym-comms-wrap").html(t.NoComment),commnet="<div class='ym-comm-floors ym-comm-floors-all'>",commnet+="<h4 class='ym-comm-title2'>全部评论</h4>",commnet+=" <div class='ym-comm-sel'><a class='ym-comm-sel-new cur'>最新</a><a class='ym-comm-sel-early'>最早</a></div>",""!=t.NewComment&&(commnet+=t.NewComment,commnet+=t.Page),commnet+="</div>",(t.Count>0||t.OneselfCount>0)&&m(".ym-comms-wrap").append(commnet),o+1>Math.ceil(t.Count/t.PageSize)&&(m(".ym-comm-floors-all .ym-comm-btnwrap").addClass("ym-comm-btnwrap-all"),m(".ym-comm-floors-all .ym-comm-btn-more").html("全部加载完成")),m(".ym-comms-wrap > .ym-comm-floor").last().addClass("last"),m(".ym-comm-floor-inner-wrap").each(function(){m(this).find(".ym-comm-floor-inner").last().addClass("last")}),m.getScript("//j.gamersky.com/web2015/comment/wapjs/new.comment.zhengce.js?"+(new Date).getTime(),function(t,a,o){m(".ym-comm-floors-all .ym-comm-btn-more").attr("data-url","https://cm.gamersky.com/wapapi/getnewestcomment2").GetWapCommentMore(),newcomm.insertRe(),newcomm.txtMore(),like(),cycm();var e=m(".ym-comm-floors-all");if(e.length>0){var n=e.find(".ym-comm-sel");n.offset().top;n.find("a").on("click",function(t){t.preventDefault(),n.find("a").removeClass("cur"),m(this).addClass("cur"),1==m(this).index()?m(".ym-comm-floors-all").GetEarliestWapComment():m(".ym-comm-floors-all").GetNewWapComment()})}})}})},m.fn.GetWapHotCommentMore=function(o){return this.each(function(){var o=m(this);o.click(function(e){e.preventDefault();var n=parseInt(o.attr("pageIndex"))+1,s=parseInt(o.attr("data-pagesize")),c=parseInt(o.attr("data-oneself")),l=parseInt(o.attr("data-count")),r=m(".ym-comm-floors-hot .newlist:first").attr("cmtid"),i="",d=m(".ym-comm-floors-hot .newlist").length;if(m("#SOHUCS").find(".ym-comm-floors-hot .newlist").each(function(t,a){t>=d-20&&(i+=m(this).attr("cmtid")+",")}),c>0&&0==l&&(l=1),n>Math.ceil(l/s))return void o.addClass("ym-comm-btn-more-done").html("全部加载完成");m(".ym-comm-loading").show();var p={pageIndex:n,pageSize:s,articleId:a,cmtid:r,lastcmtid:i};if("true"!=o.attr("data-click")){o.attr("data-click","true");var y=o.attr("data-url");m.ajax({type:"get",dataType:"jsonp",url:y,data:{jsondata:JSON2.stringify(p)},success:function(a){m(".ym-comm-loading").hide(),o.attr("data-click","false"),o.attr("pageIndex",n);var a=m.parseJSON(a.body);n==Math.ceil(l/s)&&(o.parent(".ym-comm-btnwrap").addClass("ym-comm-btnwrap-all"),o.addClass("ym-comm-btn-more-done").html("全部加载完成")),""!=a.HotComment&&(m(".ym-comm-floors-hot > .ym-comm-floor").last().after(a.HotComment).removeClass("last"),m(".ym-comm-floors-hot > .ym-comm-floor").last().addClass("last"),m(".ym-comm-floor-inner-wrap").each(function(){m(this).find(".ym-comm-floor-inner").last().addClass("last")}),newcomm.insertRe(),newcomm.txtMore(),like(),cycm(),t())}})}})})},m.fn.GetWapCommentMore=function(o){return this.each(function(){var o=m(this);o.click(function(e){e.preventDefault();var n=parseInt(o.attr("pageIndex"))+1,s=parseInt(o.attr("data-pagesize")),c=parseInt(o.attr("data-oneself")),l=parseInt(o.attr("data-count")),r=m(".ym-comm-floors-all .newlist:first").attr("cmtid");if(c>0&&0==l&&(l=1),n>Math.ceil(l/s))return void o.addClass("ym-comm-btn-more-done").html("全部加载完成");m(".ym-comm-loading").show();var i={pageIndex:n,pageSize:s,articleId:a,cmtid:r,count:l};if("true"!=o.attr("data-click")){o.attr("data-click","true");var d=o.attr("data-url");m.ajax({type:"get",dataType:"jsonp",url:d,data:{jsondata:JSON2.stringify(i)},success:function(a){m(".ym-comm-loading").hide(),o.attr("data-click","false"),o.attr("pageIndex",n);var a=m.parseJSON(a.body);n==Math.ceil(l/s)&&(o.parent(".ym-comm-btnwrap").addClass("ym-comm-btnwrap-all"),o.addClass("ym-comm-btn-more-done").html("全部加载完成")),""!=a.NewComment&&(m(".ym-comm-floors-all > .ym-comm-floor").last().after(a.NewComment).removeClass("last"),m(".ym-comm-floors-all > .ym-comm-floor").last().addClass("last"),m(".ym-comm-floor-inner-wrap").each(function(){m(this).find(".ym-comm-floor-inner").last().addClass("last")}),newcomm.insertRe(),newcomm.txtMore(),like(),cycm(),t())}})}})})},m.fn.isBindPhone=function(){function t(){var m="",t="";return t='style="position: fixed;left: 50%;top: 50%;margin:-1.34rem 0 0 -2.8rem;z-index:999999;padding:0.4rem 0.5rem 0;width: 4.6rem;height: 2.28rem;background-color:#fff;box-shadow: 0 0 0.4rem rgba(4,0,0,0.3);border-radius:0.1rem;"',m+='<div class="tmpZcPop" style="position: fixed;left: 0;top: 0;z-index:999998;width: 100%;height: 100%;"></div><div class="tmpZcPop" '+t+'><div style="line-height: 0.5rem;font-size: 0.26rem;color:#333;">根据相关规定，需要绑定手机号才能进行评论，感谢您的配合。</div><a class="tmpZcBind" style="display: block;margin: 0.3rem auto 0;width: 2.38rem;height: 0.64rem;line-height: 0.64rem;font-size: 0.26rem;color:#fff;text-align: center;background-color:#e7222a;border-radius: 0.05rem;" href="http://i.gamersky.com/user/info/mobilebind">绑定手机</a><a class="tmpZcClose" style="display: block;position: absolute;right: 0;top: 0;width: 0.5rem;height: 0.5rem;border-radius:0 0.1rem 0 0.1rem;background-color:#f2f2f3;"><img style="display: block;margin: 0.12rem 0 0 0.12rem;width: 0.26rem;height: 0.26rem;" src="http://image.gamersky.com/webimg15/wap/comm/zc-close.png" alt="X"></a></div>'}function a(){m(document).on("click","#SOHUCS .ym-comm-re .textarea,#SOHUCS .ym-comm-re .submit",function(){m("body").append(t()),m("#SOHUCS .ym-comm-re .textarea").blur(),m(".tmpZcClose").on("click",function(){m(".tmpZcPop").remove()})})}a()}}(jQuery),$(document).ready(function(){function m(){a.GetWapComment().addClass("ym-comm"),$(".ym-comm-niming").hide()}function t(){var t=a.offset().top,e=$("html").scrollTop(),n=$(window).height();0===e?e=$("body").scrollTop():e,e+n>t-50&&o===!0&&(o=!1,m())}var a=$("#SOHUCS"),o=!0,e=a.data("imload");$("head").append('<link rel="stylesheet" href="https://j.gamersky.com/wap/css/new_comment.css">'),"load"===e?m():(a.addClass("ym-comm").html('<div class="ym-comms-wrap"><div class="ym-comm-loading"><img src="http://image.gamersky.com/webimg15/loading.gif" alt=""><span>正在加载</span></div></div>'),$(window).scroll(function(){t()}),t())}),function(m){}(jQuery);
//# sourceMappingURL=main.min.js.map
