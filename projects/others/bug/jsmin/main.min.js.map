{"version":3,"sources":["jquery.commentconfig.js","main.js"],"names":["$","resizeSwpHeight","$ycTab","rh","find","css","articleId","attr","fn","GetNewWapComment","options","this","each","pageIndex","pageSize","jsondata","isHot","ajax","type","dataType","url","data","JSON2","stringify","success","parseJSON","body","commnet","NewComment","html","append","Page","Math","ceil","Count","PageSize","addClass","OneselfCount","cmtid","next","last","$ycn","on","e","preventDefault","removeClass","index","GetEarliestWapComment","GetWapCommentMore","newcomm","insertRe","txtMore","like","cycm","GetWapComment","Login","HotComment","GetWapWholeComment","GetWapHotCommentMore","IsClose","remove","Close","NoComment","getScript","Date","getTime","status","jqxhr","length","offset","top","$this","click","event","parseInt","oneselfCount","count","lastcmtid","lastlegnth","item","show","hide","parent","after","isBindPhone","createZc","zcDom","sty1","clkAlert","document","blur","jQuery","ready","startComm","$comm","commPos","commTop","wt","scrollTop","$wh","window","height","addComm","imd","scroll"],"mappings":"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","file":"main.min.js","sourcesContent":["(function ($) {\r\n    function resizeSwpHeight() {\r\n        var $ycTab = $('#ycTab');\r\n        var rh = $ycTab.find('.swiper-slide-active').css(\"height\");\r\n        $ycTab.find('.swiper-wrapper').css('height', rh);\r\n    }\r\n    var articleId = $(\"#SOHUCS\").attr(\"sid\");\r\n    /*\r\n    var checkIndex = 0;\r\n    var checkDate = \"\";\r\n    var isCheck = false;\r\n    if (window.applicationCache) {//如果支持html5\r\n        //localStorage.setItem(\"checkIndex\" + generalId, $(this).index());\r\n        checkIndex = localStorage.getItem(\"checkIndex\" + articleId);//localStorage.checkIndex;\r\n        checkDate = localStorage.checkDate;\r\n    }\r\n    if (checkDate != \"\") {\r\n        var date = new Date(checkDate);\r\n        var dateNow = new Date();\r\n        date.setHours(date.getHours() + 24);\r\n        if (date > dateNow) {\r\n            isCheck = true;\r\n        }\r\n    }\r\n    if (window.applicationCache) {\r\n        localStorage.checkDate = new Date();\r\n    }*/\r\n   \r\n    $.fn.GetNewWapComment = function (options) {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            var pageIndex = 1;\r\n            var pageSize = 10;\r\n            var jsondata = {\r\n                pageIndex: pageIndex, pageSize: pageSize, articleId: articleId, isHot: true\r\n            };\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"jsonp\",\r\n                url: \"https://cm.gamersky.com/wapapi/getnewestcomment2\",\r\n                data: {\r\n                    jsondata: JSON2.stringify(jsondata)\r\n                },\r\n                success: function (data) {\r\n                    var data = $.parseJSON(data.body);\r\n\r\n                    commnet = \"<h4 class='ym-comm-title2'>全部评论</h4>\";\r\n                    commnet += \"<div class='ym-comm-sel'><a class='ym-comm-sel-new cur'>最新</a><a class='ym-comm-sel-early'>最早</a></div>\";\r\n                    if (data.NewComment != null) {\r\n                        $(\".ym-comm-floors-all\").html(commnet);\r\n                        $(\".ym-comm-floors-all\").append(data.NewComment + data.Page);\r\n                    }\r\n                    if (pageIndex + 1 > Math.ceil(data.Count / data.PageSize)) {\r\n                        $(\".ym-comm-floors-all .ym-comm-btnwrap\").addClass(\"ym-comm-btnwrap-all\");\r\n                        $(\".ym-comm-floors-all .ym-comm-btn-more\").html(\"全部加载完成\");\r\n                    }\r\n                    if (data.Count > 0 || data.OneselfCount > 0) {\r\n                        var cmtid = $(\".ym-comm-new\").next().attr(\"cmtid\");\r\n                        $(\".ym-comm-new\").attr(\"cmtid\", cmtid);\r\n                    }\r\n                    $(\".ym-comms-wrap > .ym-comm-floor\").last().addClass(\"last\");\r\n\r\n                    $(\".ym-comm-floor-inner-wrap\").each(function () {\r\n                        $(this).find(\".ym-comm-floor-inner\").last().addClass(\"last\");\r\n                    });\r\n                    //$(\".ym-comm-btnwrap\").html($(\"<div>\" + data.Page + \"</div>\").find(\".ym-comm-btnwrap\").html());\r\n\r\n                    var $ycTab = $('.ym-comm-floors-all');\r\n                    var $ycn = $ycTab.find('.ym-comm-sel');\r\n                    $ycn.find('a').on('click', function (e) {\r\n                        e.preventDefault();\r\n                        $ycn.find('a').removeClass('cur');\r\n                        $(this).addClass('cur');\r\n                        //ycSwp.slideTo($(this).index());\r\n                        //localStorage.checkIndex = $(this).index();\r\n                        //localStorage.setItem(\"checkIndex\" + generalId, $(this).index());\r\n                        //localStorage.checkDate = new Date();\r\n                        if ($(this).index() == 1) {\r\n                            $(\".ym-comm-floors-all\").GetEarliestWapComment();\r\n                        }\r\n                        else {\r\n                            $(\".ym-comm-floors-all\").GetNewWapComment();\r\n                        }\r\n                    });\r\n                    //评论切换JS 结束\r\n                    $(\".ym-comm-floors-all .ym-comm-btn-more\").attr(\"data-url\", \"https://cm.gamersky.com/wapapi/getnewestcomment2\").GetWapCommentMore();\r\n                    newcomm.insertRe();\r\n                    newcomm.txtMore();\r\n                    like();\r\n                    cycm();\r\n                    resizeSwpHeight();\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    $.fn.GetEarliestWapComment = function (options) {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            var pageIndex = 1;\r\n            var pageSize = 10;\r\n            var jsondata = {\r\n                pageIndex: pageIndex, pageSize: pageSize, articleId: articleId, isHot: true\r\n            };\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"jsonp\",\r\n                url: \"https://cm.gamersky.com/wapapi/getearliestcomment2\",\r\n                data: {\r\n                    jsondata: JSON2.stringify(jsondata)\r\n                },\r\n                success: function (data) {\r\n                    var data = $.parseJSON(data.body);\r\n\r\n                    commnet = \"<h4 class='ym-comm-title2'>全部评论</h4>\";\r\n                    commnet += \" <div class='ym-comm-sel'><a class='ym-comm-sel-new'>最新</a><a class='ym-comm-sel-early cur'>最早</a></div>\";\r\n                    if (data.NewComment != null) {\r\n                        $(\".ym-comm-floors-all\").html(commnet);\r\n                        $(\".ym-comm-floors-all\").append(data.NewComment + data.Page);\r\n                    }\r\n                    if (pageIndex + 1 > Math.ceil(data.Count / data.PageSize)) {\r\n                        $(\".ym-comm-floors-all .ym-comm-btnwrap\").addClass(\"ym-comm-btnwrap-all\");\r\n                        $(\".ym-comm-floors-all .ym-comm-btn-more\").addClass(\"cmt-loadallbtn cur\").html(\"全部加载完成\");\r\n                    }\r\n                    if (data.Count > 0 || data.OneselfCount > 0) {\r\n                        var cmtid = $(\".ym-comm-new\").next().attr(\"cmtid\");\r\n                        $(\".ym-comm-new\").attr(\"cmtid\", cmtid);\r\n                    }\r\n                    $(\".ym-comms-wrap > .ym-comm-floor\").last().addClass(\"last\");\r\n\r\n                    $(\".ym-comm-floor-inner-wrap\").each(function () {\r\n                        $(this).find(\".ym-comm-floor-inner\").last().addClass(\"last\");\r\n                    });\r\n\r\n                    var $ycTab = $('.ym-comm-floors-all');\r\n                    var $ycn = $ycTab.find('.ym-comm-sel');\r\n                    $ycn.find('a').on('click', function (e) {\r\n                        e.preventDefault();\r\n                        $ycn.find('a').removeClass('cur');\r\n                        $(this).addClass('cur');\r\n                        //ycSwp.slideTo($(this).index());\r\n                        //localStorage.checkIndex = $(this).index();\r\n                        //localStorage.setItem(\"checkIndex\" + generalId, $(this).index());\r\n                        //localStorage.checkDate = new Date();\r\n                        if ($(this).index() == 1) {\r\n                            $(\".ym-comm-floors-all\").GetEarliestWapComment();\r\n                        }\r\n                        else {\r\n                            $(\".ym-comm-floors-all\").GetNewWapComment();\r\n                        }\r\n                    });\r\n                    //评论切换JS 结束\r\n                    $(\".ym-comm-floors-all .ym-comm-btn-more\").attr(\"data-url\", \"https://cm.gamersky.com/wapapi/getearliestcomment2\").GetWapCommentMore();\r\n\r\n                    newcomm.insertRe();\r\n                    newcomm.txtMore();\r\n                    like();\r\n                    cycm();\r\n                    resizeSwpHeight();\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    $.fn.GetWapComment = function (options) {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            var pageIndex = 1;\r\n            var pageSize = 10;\r\n            var jsondata = {\r\n                pageIndex: pageIndex, pageSize: pageSize, articleId: articleId\r\n            };\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"jsonp\",\r\n                url: \"https://cm.gamersky.com/wapapi/gethotcomment2\",\r\n                data: {\r\n                    jsondata: JSON2.stringify(jsondata)\r\n                },\r\n                success: function (data) {\r\n                    $(\"#SOHUCS\").html('');\r\n                    var data = $.parseJSON(data.body);\r\n                    $(\"#SOHUCS\").html();\r\n                    if (pageIndex == 1) {\r\n                        $(\"#SOHUCS\").append(data.Login); \r\n                    }\r\n                    var commnet = \"<div class='ym-comms-wrap'></div>\";\r\n                    $(\"#SOHUCS\").append(commnet);\r\n                    commnet = \"<div class='ym-comm-floors ym-comm-floors-hot'>\";\r\n                    commnet += \"<h4 class='ym-comm-title2'>热门评论</h4>\";\r\n                    if (data.HotComment != \"\") {\r\n                       commnet += data.HotComment;\r\n                       commnet += data.Page;\r\n                    }\r\n                    commnet += \"</div>\";\r\n                    if (data.Count > 0 || data.OneselfCount > 0) {\r\n                        $(\".ym-comms-wrap\").append(commnet);\r\n                    }\r\n                    if (pageIndex + 1 > Math.ceil(data.Count / data.PageSize)) {\r\n                        $(\".ym-comm-floors-hot .ym-comm-btnwrap\").addClass(\"ym-comm-btnwrap-all\");\r\n                        $(\".ym-comm-floors-hot .ym-comm-btn-more\").html(\"全部加载完成\");\r\n                    }\r\n                    $(\".ym-comms-wrap\").GetWapWholeComment();\r\n                    $(\".ym-comm-floors-hot .ym-comm-btn-more\").attr(\"data-url\", \"https://cm.gamersky.com/wapapi/gethotcomment2\").GetWapHotCommentMore();\r\n                }\r\n            });\r\n        });\r\n    };\r\n\r\n    $.fn.GetWapWholeComment = function (options) {\r\n        var pageIndex = 1;\r\n        var pageSize = 10;\r\n        var jsondata = {\r\n            pageIndex: pageIndex, pageSize: pageSize, articleId: articleId\r\n        };\r\n        $.ajax({\r\n            type: \"get\",\r\n            dataType: \"jsonp\",\r\n            url: \"https://cm.gamersky.com/wapapi/getnewestcomment2\",\r\n            data: {\r\n                jsondata: JSON2.stringify(jsondata)\r\n            },\r\n            success: function (data) {\r\n                var data = $.parseJSON(data.body);\r\n                if (data.IsClose) {\r\n                    $(\"#SOHUCS .ym-comms-wrap\").remove();\r\n                    $(\"#SOHUCS\").append(data.Close);\r\n                }\r\n                else if (data.Count == 0 && data.OneselfCount == 0) {\r\n                    $(\".ym-comms-wrap\").html(data.NoComment);\r\n                }\r\n                commnet = \"<div class='ym-comm-floors ym-comm-floors-all'>\";\r\n                commnet += \"<h4 class='ym-comm-title2'>全部评论</h4>\";\r\n                commnet += \" <div class='ym-comm-sel'><a class='ym-comm-sel-new cur'>最新</a><a class='ym-comm-sel-early'>最早</a></div>\";\r\n                if (data.NewComment != \"\") {\r\n                    commnet += data.NewComment;\r\n                    commnet += data.Page;\r\n                }\r\n                commnet += \"</div>\";\r\n                if (data.Count > 0 || data.OneselfCount > 0) {\r\n                    $(\".ym-comms-wrap\").append(commnet);\r\n                }\r\n                if (pageIndex + 1 > Math.ceil(data.Count / data.PageSize)) {\r\n                    $(\".ym-comm-floors-all .ym-comm-btnwrap\").addClass(\"ym-comm-btnwrap-all\");\r\n                    $(\".ym-comm-floors-all .ym-comm-btn-more\").html(\"全部加载完成\");\r\n                }\r\n                $(\".ym-comms-wrap > .ym-comm-floor\").last().addClass(\"last\");\r\n\r\n                $(\".ym-comm-floor-inner-wrap\").each(function () {\r\n                    $(this).find(\".ym-comm-floor-inner\").last().addClass(\"last\");\r\n                });\r\n                //resizeSwpHeight();\r\n\r\n                $.getScript('//j.gamersky.com/web2015/comment/wapjs/new.comment.zhengce.js?' + new Date().getTime(), function (data, status, jqxhr) {\r\n                    $(\".ym-comm-floors-all .ym-comm-btn-more\").attr(\"data-url\", \"https://cm.gamersky.com/wapapi/getnewestcomment2\").GetWapCommentMore();\r\n                    newcomm.insertRe();\r\n                    newcomm.txtMore();\r\n                    like();\r\n                    cycm();\r\n\r\n                    //评论切换JS开始\r\n                    var $ycTab = $('.ym-comm-floors-all');\r\n                    if ($ycTab.length > 0) {\r\n                        var $ycn = $ycTab.find('.ym-comm-sel'), ycTop = $ycn.offset().top;\r\n                        $ycn.find('a').on('click', function (e) {\r\n                            e.preventDefault();\r\n                            $ycn.find('a').removeClass('cur');\r\n                            $(this).addClass('cur');\r\n                            //ycSwp.slideTo($(this).index());\r\n                            //localStorage.checkIndex = $(this).index();\r\n                            //localStorage.setItem(\"checkIndex\" + generalId, $(this).index());\r\n                            //localStorage.checkDate = new Date();\r\n                            if ($(this).index() == 1) {\r\n                                $(\".ym-comm-floors-all\").GetEarliestWapComment();\r\n                            }\r\n                            else {\r\n                                $(\".ym-comm-floors-all\").GetNewWapComment();\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    $.fn.GetWapHotCommentMore = function (options) {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            $this.click(function (event) {\r\n                event.preventDefault();\r\n                var pageIndex = parseInt($this.attr(\"pageIndex\")) + 1;\r\n                var pageSize = parseInt($this.attr(\"data-pagesize\"));\r\n                var oneselfCount = parseInt($this.attr(\"data-oneself\"));\r\n                var count = parseInt($this.attr(\"data-count\"));\r\n                var cmtid = $(\".ym-comm-floors-hot .newlist:first\").attr(\"cmtid\");//$(\".ym-comm-new\").attr(\"cmtid\");\r\n                var lastcmtid = \"\";\r\n                var lastlegnth = $(\".ym-comm-floors-hot .newlist\").length;\r\n                $(\"#SOHUCS\").find(\".ym-comm-floors-hot .newlist\").each(function (index, item) {\r\n                    if (index >= lastlegnth - 20) {\r\n                        lastcmtid += $(this).attr(\"cmtid\") + \",\";\r\n                    }\r\n                });\r\n                if (oneselfCount > 0 && count == 0) {\r\n                    count = 1;\r\n                }\r\n                if (pageIndex > Math.ceil(count / pageSize)) {\r\n                    $this.addClass(\"ym-comm-btn-more-done\").html(\"全部加载完成\");\r\n                    return;\r\n                }\r\n                $(\".ym-comm-loading\").show();\r\n                var jsondata = {\r\n                    pageIndex: pageIndex, pageSize: pageSize, articleId: articleId, cmtid: cmtid, lastcmtid: lastcmtid\r\n                };\r\n                if ($this.attr(\"data-click\") == \"true\") {\r\n                    return;\r\n                }\r\n                $this.attr(\"data-click\", \"true\");\r\n                var url = $this.attr(\"data-url\");\r\n                $.ajax({\r\n                    type: \"get\",\r\n                    dataType: \"jsonp\",\r\n                    url: url,\r\n                    data: {\r\n                        jsondata: JSON2.stringify(jsondata)\r\n                    },\r\n                    success: function (data) {\r\n                        $(\".ym-comm-loading\").hide();\r\n                        $this.attr(\"data-click\", \"false\");\r\n                        $this.attr(\"pageIndex\", pageIndex);\r\n                        var html = \"\";\r\n                        var data = $.parseJSON(data.body);\r\n                        if (pageIndex == Math.ceil(count / pageSize)) {\r\n                            $this.parent(\".ym-comm-btnwrap\").addClass(\"ym-comm-btnwrap-all\");\r\n                            $this.addClass(\"ym-comm-btn-more-done\").html(\"全部加载完成\");\r\n                        }\r\n                        if (data.HotComment != \"\") {\r\n                            $(\".ym-comm-floors-hot > .ym-comm-floor\").last().after(data.HotComment).removeClass(\"last\");\r\n                            $(\".ym-comm-floors-hot > .ym-comm-floor\").last().addClass(\"last\");\r\n                            $(\".ym-comm-floor-inner-wrap\").each(function () {\r\n                                $(this).find(\".ym-comm-floor-inner\").last().addClass(\"last\");\r\n                            });\r\n                            newcomm.insertRe();\r\n                            newcomm.txtMore();\r\n                            like();\r\n                            cycm();\r\n                            resizeSwpHeight();\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    };\r\n\r\n    $.fn.GetWapCommentMore = function (options) {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            $this.click(function (event) {\r\n                event.preventDefault();\r\n                var pageIndex = parseInt($this.attr(\"pageIndex\")) + 1;\r\n                var pageSize = parseInt($this.attr(\"data-pagesize\"));\r\n                var oneselfCount = parseInt($this.attr(\"data-oneself\"));\r\n                var count = parseInt($this.attr(\"data-count\"));\r\n                var cmtid = $(\".ym-comm-floors-all .newlist:first\").attr(\"cmtid\");//$(\".ym-comm-new\").attr(\"cmtid\");\r\n                if (oneselfCount > 0 && count == 0) {\r\n                    count = 1;\r\n                }\r\n                if (pageIndex > Math.ceil(count / pageSize)) {\r\n                    $this.addClass(\"ym-comm-btn-more-done\").html(\"全部加载完成\");\r\n                    return;\r\n                }\r\n                $(\".ym-comm-loading\").show();\r\n                var jsondata = {\r\n                    pageIndex: pageIndex, pageSize: pageSize, articleId: articleId, cmtid: cmtid, count: count\r\n                };\r\n                if ($this.attr(\"data-click\") == \"true\") {\r\n                    return;\r\n                }\r\n                $this.attr(\"data-click\", \"true\");\r\n                var url = $this.attr(\"data-url\");\r\n                $.ajax({\r\n                    type: \"get\",\r\n                    dataType: \"jsonp\",\r\n                    url: url,\r\n                    data: {\r\n                        jsondata: JSON2.stringify(jsondata)\r\n                    },\r\n                    success: function (data) {\r\n                        $(\".ym-comm-loading\").hide();\r\n                        $this.attr(\"data-click\", \"false\");\r\n                        $this.attr(\"pageIndex\", pageIndex);\r\n                        var html = \"\";\r\n                        var data = $.parseJSON(data.body);\r\n                        if (pageIndex == Math.ceil(count / pageSize)) {\r\n                            $this.parent(\".ym-comm-btnwrap\").addClass(\"ym-comm-btnwrap-all\");\r\n                            $this.addClass(\"ym-comm-btn-more-done\").html(\"全部加载完成\");\r\n                        }\r\n                        if (data.NewComment != \"\") {\r\n                            $(\".ym-comm-floors-all > .ym-comm-floor\").last().after(data.NewComment).removeClass(\"last\");\r\n                            $(\".ym-comm-floors-all > .ym-comm-floor\").last().addClass(\"last\");\r\n                            $(\".ym-comm-floor-inner-wrap\").each(function () {\r\n                                $(this).find(\".ym-comm-floor-inner\").last().addClass(\"last\");\r\n                            });\r\n                            newcomm.insertRe();\r\n                            newcomm.txtMore();\r\n                            like();\r\n                            cycm();\r\n                            resizeSwpHeight();\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    };\r\n\r\n\t$.fn.isBindPhone = function () {\r\n        function createZc() {\r\n            var zcDom = '',sty1 = '';\r\n            sty1 = 'style=\"position: fixed;left: 50%;top: 50%;margin:-1.34rem 0 0 -2.8rem;z-index:999999;padding:0.4rem 0.5rem 0;width: 4.6rem;height: 2.28rem;background-color:#fff;box-shadow: 0 0 0.4rem rgba(4,0,0,0.3);border-radius:0.1rem;\"';\r\n            zcDom += '<div class=\"tmpZcPop\" style=\"position: fixed;left: 0;top: 0;z-index:999998;width: 100%;height: 100%;\"></div><div class=\"tmpZcPop\" '+sty1+'><div style=\"line-height: 0.5rem;font-size: 0.26rem;color:#333;\">根据相关规定，需要绑定手机号才能进行评论，感谢您的配合。</div><a class=\"tmpZcBind\" style=\"display: block;margin: 0.3rem auto 0;width: 2.38rem;height: 0.64rem;line-height: 0.64rem;font-size: 0.26rem;color:#fff;text-align: center;background-color:#e7222a;border-radius: 0.05rem;\" href=\"http://i.gamersky.com/user/info/mobilebind\">绑定手机</a><a class=\"tmpZcClose\" style=\"display: block;position: absolute;right: 0;top: 0;width: 0.5rem;height: 0.5rem;border-radius:0 0.1rem 0 0.1rem;background-color:#f2f2f3;\"><img style=\"display: block;margin: 0.12rem 0 0 0.12rem;width: 0.26rem;height: 0.26rem;\" src=\"http://image.gamersky.com/webimg15/wap/comm/zc-close.png\" alt=\"X\"></a></div>';\r\n            return zcDom;\r\n        }\r\n        function clkAlert() {\r\n            $(document).on('click','#SOHUCS .ym-comm-re .textarea,#SOHUCS .ym-comm-re .submit',function () {\r\n                $('body').append(createZc());\r\n                $('#SOHUCS .ym-comm-re .textarea').blur();\r\n                $('.tmpZcClose').on('click',function () {\r\n                    $('.tmpZcPop').remove();\r\n                });\r\n            });\r\n        }\r\n        clkAlert();\r\n    };\r\n    //$.fn.bindFirst = function (name, fn) {\r\n    //    this.on(name, fn).trigger(name);\r\n    //    this.each(function () {\r\n    //        var handlers = $._data(this, 'events')[name.split('.')[0]];\r\n    //        var handler = handlers.pop();\r\n    //        handlers.splice(0, 0, handler);\r\n    //    });\r\n    //};\r\n})(jQuery);\r\n$(document).ready(function () {\r\n    var $comm = $(\"#SOHUCS\"),addComm = true,imd = $comm.data('imload');\r\n    $('head').append('<link rel=\"stylesheet\" href=\"https://j.gamersky.com/wap/css/new_comment.css\">');\r\n    function startComm(){\r\n        $comm.GetWapComment().addClass('ym-comm');\r\n        $('.ym-comm-niming').hide();\r\n    }\r\n    function commPos() {\r\n        var commTop = $comm.offset().top,wt = $('html').scrollTop(),$wh = $(window).height();\r\n        wt===0?wt=$('body').scrollTop():wt;\r\n        if(wt+$wh>commTop-50){\r\n            if(addComm === true){\r\n                addComm = false;\r\n                startComm();\r\n            }\r\n        }\r\n    }\r\n    if(imd === 'load'){\r\n        startComm();\r\n    }else{\r\n        $comm.addClass('ym-comm').html('<div class=\"ym-comms-wrap\"><div class=\"ym-comm-loading\"><img src=\"http://image.gamersky.com/webimg15/loading.gif\" alt=\"\"><span>正在加载</span></div></div>');\r\n        $(window).scroll(function () {\r\n            commPos();\r\n        });\r\n        commPos();\r\n    }\r\n    //var isTrim = function (s) { return s.replace(/(^\\s*)|(\\s*$)/g, \"\"); };  //清除空格\r\n    //var scroll = false;\r\n    //$(window).bindFirst('scroll', function (event) {\r\n    //    if ($(window).height() + $(document).scrollTop() >= $(\"#SOHUCS\").offset().top) {\r\n    //        if (!isTrim($(\"#SOHUCS\").html()) && !scroll) {\r\n    //            scroll = true;\r\n                \r\n    //        }\r\n    //    }\r\n    //});\r\n});\r\n","(function($){\r\n    //other\r\n})(jQuery);"]}