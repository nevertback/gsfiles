{"version":3,"sources":["main.js"],"names":["$","dataApi","fx","countIds","name","kuid","oldid","newid","zqid","addCountZp","each","i","item","addClass","attr","addCountZq","getPageGameKuId","gameLib","undefined","data","getApiData","callback","ajax","dataType","url","success","backData","status","longStyle","styleDom","midStyle","longPos","contain","dt","calcOff","inlineSty","outDom","info","priOld","parseInt","oldprice","priNow","price","hasOff","diyCss","Math","round","title","html","midPos","miniPos","append","insert","thisFunction","this","longId","midId","miniId","miniNav","length","init","jQuery"],"mappings":"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","file":"main.min.js","sourcesContent":["(function($){\r\n    var dataApi = 'http://db2.gamersky.com/GameDistributor.aspx?game_id=',\r\n        fx = {\r\n            countIds:[\r\n                {\r\n                    name:'仁王',\r\n                    kuid:'662872',//游戏库ID\r\n                    oldid:'993591',//众评 旧 统计ID\r\n                    newid:'993596',//众评 新 统计ID\r\n                    zqid:'993597' //专区 新 统计ID\r\n                },\r\n                {\r\n                    name:'尼尔：机械纪元',\r\n                    kuid:'673540',\r\n                    oldid:'993589',\r\n                    newid:'993595',\r\n                    zqid:'993594'\r\n                }\r\n            ],\r\n            addCountZp:function (kuid) {\r\n                $.each(fx.countIds,function (i,item) {\r\n                    if(item.kuid == kuid){\r\n                        $('.tgFenxiaoMini').addClass('countHit countHitSql').attr('data-itemid',item.newid);\r\n                        $('.YXXX-L .btn a').addClass('countHit countHitSql').attr('data-itemid',item.oldid);\r\n                    }\r\n                });\r\n            },\r\n            addCountZq:function (kuid) {\r\n                $.each(fx.countIds,function (i,item) {\r\n                    if(item.kuid == kuid){\r\n                        $('.tg-fenxiao-btn').addClass('countHit countHitSql').attr('data-itemid',item.zqid);\r\n                    }\r\n                });\r\n            },\r\n            getPageGameKuId:function () {\r\n                var kuid;\r\n                if(typeof gameLib !== 'undefined'){\r\n                    kuid = gameLib;\r\n                }\r\n                if(kuid === undefined){\r\n                    $('#gamerskypf').data('generalid');\r\n                }\r\n                if(kuid === undefined){\r\n                    kuid = $('#Remark').attr('sid');\r\n                }\r\n                if(kuid === undefined){\r\n                    kuid = $('.ratingGroup').data('generalid');\r\n                }\r\n                return kuid;\r\n            },\r\n            getApiData:function(callback){\r\n                var kuid = fx.getPageGameKuId();\r\n                $.ajax({\r\n                    dataType:'jsonp',\r\n                    url:dataApi+kuid,\r\n                    success:function (backData) {\r\n                        if(backData.status === 1){\r\n                            if(typeof callback === 'function'){\r\n                                callback(backData);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            longStyle:function () {\r\n                //长广告样式\r\n                var styleDom = '';\r\n                styleDom += '.tg-fenxiao-long{white-space: nowrap;position:relative;margin:20px auto 30px;width:100%;height:64px;background-color:#fff;-webkit-box-shadow:0 1px 0 rgba(102,102,102,.15);box-shadow:0 1px 0 rgba(102,102,102,.15);font-family:\"Microsoft YaHei\"}.tg-fenxiao-long div{overflow:visible}.tg-fenxiao-long a{text-decoration:none}.tg-fenxiao-long a:hover{text-decoration:none}.tg-fenxiao-long .tg-fenxiao-name{padding-left:55px;width:250px;height:64px;line-height:64px;font-size:18px;color:#262626;font-weight:700;background:url(http://image.gamersky.com/webimg15/tg/long-buy.png) 18px center no-repeat;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.tg-fenxiao-long .tg-fenxiao-right{position:absolute;right:16px;top:16px}.tg-fenxiao-long .tg-fenxiao-right .tg-fenxiao-price{position:absolute;top:0;right:118px;height:32px;line-height:32px;color:#333}.tg-fenxiao-long .tg-fenxiao-right .tg-fenxiao-price span{font-size:14px}.tg-fenxiao-long .tg-fenxiao-right .tg-fenxiao-price i{font-size:18px;font-style:normal}.tg-fenxiao-long .tg-fenxiao-right .tg-fenxiao-price.tg-fenxiao-price-off{right:168px;color:#df3900;white-space: nowrap;}.tg-fenxiao-long .tg-fenxiao-right .tg-fenxiao-price.tg-fenxiao-price-off del{margin-right:14px;font-size:14px;color:#666}.tg-fenxiao-long .tg-fenxiao-right .tg-fenxiao-btn{display:block;width:100px;height:32px;line-height:32px;background:url(http://image.gamersky.com/webimg15/tg/long-btn.png) 0 0 no-repeat;font-size:14px;color:#fff;text-align:center}.tg-fenxiao-long .tg-fenxiao-right .tg-fenxiao-btn span{display:none}.tg-fenxiao-long .tg-fenxiao-right .tg-fenxiao-btn:hover{background-position:0 -40px}.tg-fenxiao-long .tg-fenxiao-right .tg-fenxiao-btn.tg-fenxiao-btn-off{padding-left:48px;background-position:0 -79px}.tg-fenxiao-long .tg-fenxiao-right .tg-fenxiao-btn.tg-fenxiao-btn-off span{display:block;position:absolute;left:0;top:0;width:48px;text-align:center}.tg-fenxiao-long .tg-fenxiao-right .tg-fenxiao-btn.tg-fenxiao-btn-off:hover{text-decoration:none;background-position:0 -119px}';\r\n                return styleDom;\r\n\r\n            },\r\n            midStyle:function () {\r\n                //中广告样式\r\n                var styleDom = '';\r\n                styleDom += '.tg-fenxiao-middle{white-space: nowrap;position:relative;margin:0 15px 15px;height:39px;border-top:1px solid #424242;border-bottom:1px solid #424242}.tg-fenxiao-middle a{text-decoration:none}.tg-fenxiao-middle a:hover{text-decoration:none}.tg-fenxiao-middle .tg-fenxiao-price{position:relative;height:39px;line-height:39px;color:#f35f1c;font-family:\"Microsoft YaHei\"}.tg-fenxiao-middle .tg-fenxiao-price span{font-size:14px}.tg-fenxiao-middle .tg-fenxiao-price i{font-size:18px;font-style:normal}.tg-fenxiao-middle .tg-fenxiao-price.tg-fenxiao-price-off del{margin-right:14px;font-size:14px;color:#aaa}.tg-fenxiao-middle .tg-fenxiao-btn{position:absolute;right:0;top:7px;display:block;width:72px;height:25px;line-height:25px;background:url(http://image.gamersky.com/webimg15/tg/mid-btn.png) 0 0 no-repeat;font-size:12px;color:#fff0eb;text-align:center}.tg-fenxiao-middle .tg-fenxiao-btn span{display:none}.tg-fenxiao-middle .tg-fenxiao-btn:hover{background-position:0 -30px;color:#fff0eb}.tg-fenxiao-middle .tg-fenxiao-btn.tg-fenxiao-btn-off{padding-left:44px;background-position:0 -60px}.tg-fenxiao-middle .tg-fenxiao-btn.tg-fenxiao-btn-off span{display:block;position:absolute;left:0;top:0;width:44px;text-align:center}.tg-fenxiao-middle .tg-fenxiao-btn.tg-fenxiao-btn-off:hover{text-decoration:none;background-position:0 -90px}';\r\n                return styleDom;\r\n\r\n            },\r\n            longPos:function (contain,dt) {\r\n                var outDom = '',\r\n                    info = dt.data,\r\n                    priOld = parseInt(info.oldprice),\r\n                    priNow = parseInt(info.price),\r\n                    hasOff = true,\r\n                    calcOff,diyCss = contain.data('css'),inlineSty;\r\n                if(priOld === priNow){\r\n                    hasOff = false;\r\n                }else{\r\n                    calcOff = Math.round((1-priNow/priOld)*100)+'%';\r\n                }\r\n                if(diyCss){\r\n                    inlineSty = 'style=\"' + diyCss + '\"';\r\n                }else{\r\n                    inlineSty = '';\r\n                }\r\n                outDom += '<style>'+fx.longStyle()+'</style>';\r\n                outDom += '<div class=\"tg-fenxiao-long\" '+inlineSty+'><div class=\"tg-fenxiao-name\">';\r\n                outDom += info.title;\r\n                outDom += '</div><div class=\"tg-fenxiao-right\">';\r\n                if(hasOff === true){\r\n                    outDom += '<div class=\"tg-fenxiao-price tg-fenxiao-price-off\"><del>￥'+priOld+'</del><span>￥</span><i>'+priNow+'</i></div>';\r\n                    outDom += '<a target=\"_blank\" href=\"'+info.url+'\" class=\"tg-fenxiao-btn tg-fenxiao-btn-off\"><span>-'+calcOff+'</span>正版购买</a>';\r\n                }else{\r\n                    outDom += '<div class=\"tg-fenxiao-price\"><span>￥</span><i>'+priNow+'</i></div>';\r\n                    outDom += '<a target=\"_blank\" href=\"'+info.url+'\" class=\"tg-fenxiao-btn\">正版购买</a>';\r\n                }\r\n                outDom += '</div></div>';\r\n                contain.html(outDom);\r\n            },\r\n            midPos:function (contain,dt) {\r\n                var outDom = '',\r\n                    info = dt.data,\r\n                    priOld = parseInt(info.oldprice),\r\n                    priNow = parseInt(info.price),\r\n                    hasOff = true,\r\n                    calcOff;\r\n                if(priOld === priNow){\r\n                    hasOff = false;\r\n                }else{\r\n                    calcOff = Math.round((1-priNow/priOld)*100)+'%';\r\n                }\r\n                outDom += '<style>'+fx.midStyle()+'</style>';\r\n                outDom += '<div class=\"tg-fenxiao-middle\">';\r\n                if(hasOff === true){\r\n                    outDom += '<div class=\"tg-fenxiao-price tg-fenxiao-price-off\"><del>￥'+priOld+'</del><span>￥</span><i>'+priNow+'</i></div>';\r\n                    outDom += '<a target=\"_blank\" href=\"'+info.url+'\" class=\"tg-fenxiao-btn tg-fenxiao-btn-off\"><span>-'+calcOff+'</span>正版购买</a>';\r\n                }else{\r\n                    outDom += '<div class=\"tg-fenxiao-price\"><span>￥</span><i>'+priNow+'</i></div>';\r\n                    outDom += '<a target=\"_blank\" href=\"'+info.url+'\" class=\"tg-fenxiao-btn\">正版购买</a>';\r\n                }\r\n                outDom += '</div>';\r\n                contain.html(outDom);\r\n                fx.addCountZq(info.kuid);\r\n            },\r\n            miniPos:function (contain,dt) {\r\n                var outDom = '',\r\n                    info = dt.data;\r\n                outDom += '<a target=\"_blank\" href=\"'+info.url+'\" class=\"tgFenxiaoMini\" style=\"background: url(http://image.gamersky.com/webimg15/tg/mini-btn.png) center 5px no-repeat;\"></a>';\r\n                contain.append(outDom);\r\n                fx.addCountZp(info.kuid);\r\n            },\r\n            insert:function (dt) {\r\n                var thisFunction = this,\r\n                    longId = $('#tgFenxiaoLong'),\r\n                    midId = $('#tgFenxiaoMiddle'),\r\n                    miniId = $('#tgFenxiaoMini'),\r\n                    miniNav = $('.Midnav');\r\n                if(longId.length>0){\r\n                    thisFunction.longPos(longId,dt);\r\n                }\r\n                if(midId.length>0){\r\n                    thisFunction.midPos(midId,dt);\r\n                }\r\n                if(miniId.length>0){\r\n                    thisFunction.miniPos(miniNav,dt);\r\n                }\r\n            },\r\n            init:function () {\r\n                var thisFunction = this;\r\n                thisFunction.getApiData(function (dt) {\r\n                    thisFunction.insert(dt);\r\n                })\r\n            }\r\n        };\r\n    fx.init();\r\n})(jQuery);"]}