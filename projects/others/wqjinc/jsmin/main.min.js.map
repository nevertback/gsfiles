{"version":3,"sources":["main.js"],"names":["$","wqj","config","mainArea","datafrom","cssfrom","lotteryId","url","title","getDt","defSelect","tab","tar","$tab","$box","find","eq","addClass","insertMain","dt","sel","cfg","this","$main","mainDom","voteid","each","items","i","wili","trim","pic","index","names","chs","html","sbie","browser","msie","ver","parseInt","version","vid","data","addVtData","getVoteData","backdata","item","numMax","numMin","numArr","j","length","push","TotalNumber","Math","max","apply","min","vsid","Id","vsnum","itTar","css","getData","that","ajax","dataType","cache","success","wjqData","callback","type","json","id","responseJson","status","alert","message","init","csslink","append","jQuery"],"mappings":"CAAA,SAAAA,GACA,GAAAC,IACAC,QACAC,SAAA,gBACAC,SAAA,oDACAC,QAAA,qEACAC,UAAA,GACAC,IAAA,2CACAC,MAAA,WACAC,MAAA,OACAC,UAAA,GAEAC,IAAA,SAAAC,GACA,GAAAC,GAAAb,EAAAY,GAAAE,EAAAD,EAAAE,KAAA,SACAD,GAAAC,KAAA,WAAAC,GAAAf,EAAAC,OAAAQ,WAAAO,SAAA,UAEAC,WAAA,SAAAC,EAAAC,GACA,GAAAC,GAAAC,KAAApB,OAAAqB,EAAAvB,EAAAqB,EAAAlB,UAAAqB,EAAA,EACAA,IAAA,4BAAAH,EAAAd,IAAA,8NAAAc,EAAAb,MAAA,cACAgB,GAAA,qEACAA,GAAA,6BACAA,GAAA,oDAAAL,EAAAC,GAAAK,OAAA,KACAzB,EAAA0B,KAAAP,EAAAC,GAAAO,MAAA,SAAAC,EAAAC,GACA,KAAA7B,EAAA8B,KAAAD,EAAAE,IAAAC,SACAR,GAAA,mDAAAK,EAAAJ,OAAA,eAAAI,EAAAI,MAAAC,IAAA,wFAAAd,EAAA,iCAAAS,EAAAE,IAAAC,MAAA,uHAAAH,EAAAI,MAAAC,IAAA,wLAAAd,EAAA,6CAGAI,GAAA,SAEAA,GAAA,SACAA,GAAA,SACAD,EAAAY,KAAAX,EACA,IAAAY,GAAApC,EAAAqC,QAAAC,KACAC,EAAAC,SAAAxC,EAAAqC,QAAAI,QACAL,MAAA,GAAAG,GAAA,GACAhB,EAAAN,SAAA,SAEAhB,EAAAU,IAAA,gBACAX,EAAA,eAAA0B,KAAA,WACA,GAAAgB,GAAA1C,EAAAsB,MAAAqB,KAAA,MACA1C,GAAA2C,UAAAF,MAGAE,UAAA,SAAAF,GACAzC,EAAA4C,YAAAH,EAAA,SAAAI,GACA9C,EAAA0B,KAAAoB,EAAAnB,MAAA,SAAAC,EAAAmB,GAEA,IAAA,GADAC,GAAAC,EAAAC,KACAC,EAAA,EAAAA,EAAAL,EAAAnB,MAAAyB,OAAAD,IACAD,EAAAG,KAAAP,EAAAnB,MAAAwB,GAAAG,YAEAN,GAAAO,KAAAC,IAAAC,MAAA,KAAAP,GACAD,EAAAM,KAAAG,IAAAD,MAAA,KAAAP,GACA,IAAAF,IACAA,EAAA,GAEAhD,EAAA0B,KAAAoB,EAAAnB,MAAA,SAAAC,EAAAmB,GACA,GAAAY,GAAAZ,EAAAa,GAAAC,EAAAd,EAAAO,YACAQ,EAAA9D,EAAA,2BAAA2D,EAAA,IACAG,GAAA/C,KAAA,cAAAoB,KAAA0B,GACAC,EAAA/C,KAAA,YAAAgD,IAAA,QAAA,MAAAF,EAAAZ,GAAAD,EAAAC,EAAAD,GAAA,YAKAgB,QAAA,WACA,GAAAC,GAAA3C,IACAtB,GAAAkE,MACAC,SAAA,SACA5D,IAAA0D,EAAA/D,OAAAE,SACAgE,OAAA,EACAC,QAAA,WACAJ,EAAA/C,WAAAoD,QAAAL,EAAA/D,OAAAO,WAIAoC,YAAA,SAAApB,EAAA8C,GACAvE,EAAAkE,MACAM,KAAA,MACAL,SAAA,QACA5D,IAAA,6CACAoC,MACA8B,KAAA,IACAC,GAAAjD,GAEA4C,QAAA,SAAAM,GACA,OAAAA,EAAAC,QACA,IAAA,KACA,kBAAAL,IACAA,EAAAI,EAEA,MACA,KAAA,MACAE,MAAAF,EAAAG,cAMAC,KAAA,WACA,GAAAC,GAAA,gCAAA1D,KAAApB,OAAAG,QAAA,KACAL,GAAA,QAAAiF,OAAAD,GACA1D,KAAA0C,WAGAhE,GAAA,WACAC,EAAA8E,UAEAG","file":"main.min.js","sourcesContent":["(function($){\r\n    var wqj = {\r\n        config:{\r\n            mainArea:'#wqjIndexMain',\r\n            datafrom:'http://j.gamersky.com/zhuanti/wqj2017/wqj.data.js',\r\n            cssfrom:'http://j.gamersky.com//zhuanti/wqj2017/index/style.css?20171221001',\r\n            lotteryId:18,\r\n            url:'http://www.gamersky.com/zhuanti/wqj2017/',\r\n            title:'年度最佳游戏评选',\r\n            getDt:'zjyx',\r\n            defSelect:0\r\n        },\r\n        tab:function (tar) {\r\n            var $tab = $(tar),$box = $tab.find('.wiBox');\r\n            $box.find('.wiItem').eq(wqj.config.defSelect).addClass('acted');\r\n        },\r\n        insertMain:function (dt,sel) {\r\n            var cfg = this.config,$main = $(cfg.mainArea),mainDom = '';\r\n            mainDom += '<a target=\"_blank\" href=\"'+cfg.url+'\" class=\"wi-title\" style=\"margin-bottom: 6px;height: 110px;background-image:url(http://image.gamersky.com/webimg13/zhuanti/wqj2017/index/wi-top20180111.png);background-position:0 -8px;\"><span style=\"padding-top: 60px;\">'+cfg.title+'</span></a>';\r\n            mainDom += '<div class=\"wi-tab wiTab\" id=\"wqjIndexTab\" style=\"height: 233px;\">';\r\n            mainDom += '<div class=\"wi-box wiBox\">';\r\n            mainDom += '<div class=\"wi-item wiItem wiVoteMain\" data-vid=\"'+dt[sel].voteid+'\">';\r\n            $.each(dt[sel].items,function (i,wili) {\r\n                if($.trim(wili.pic.index) !== ''){\r\n                    mainDom += '<div class=\"wi-li wiLi wiVoteEach\" data-voteid=\"'+wili.voteid+'\"><a title=\"'+wili.names.chs+'\" target=\"_blank\" href=\"http://www.gamersky.com/zhuanti/wqj2017/vote.shtml?wqjpageid='+sel+'\" class=\"wi-li-con\"><img src=\"'+wili.pic.index+'\" alt=\"\"><i class=\"wi-mask\"></i><i class=\"wi-dot\"></i><span class=\"wi-bar wiBar\"><i></i></span><span class=\"wi-tit\">'+wili.names.chs+'</span><span class=\"wi-vt\"><b class=\"wiVoteNum\">-</b>票</span></a><div class=\"wi-zhedang\"></div><a target=\"_blank\" href=\"http://www.gamersky.com/zhuanti/wqj2017/vote.shtml?wqjpageid='+sel+'\" class=\"wi-btn wiVoteBtn\">查看</a></div>';\r\n                }\r\n            });\r\n            mainDom += '</div>';\r\n\r\n            mainDom += '</div>';\r\n            mainDom += '</div>';\r\n            $main.html(mainDom);\r\n            var sbie = $.browser.msie,\r\n                ver = parseInt($.browser.version);\r\n            if(sbie === true && ver <= 6){\r\n                $main.addClass('vtIe6');\r\n            }\r\n            wqj.tab('#wqjIndexTab');\r\n            $('.wiVoteMain').each(function () {\r\n                var vid = $(this).data('vid');\r\n                wqj.addVtData(vid);\r\n            });\r\n        },\r\n        addVtData:function (vid) {\r\n            wqj.getVoteData(vid,function (backdata) {\r\n                $.each(backdata.items,function (i,item) {\r\n                    var numArr = [],numMax,numMin;\r\n                    for(var j=0;j<backdata.items.length;j++){\r\n                        numArr.push(backdata.items[j].TotalNumber)\r\n                    }\r\n                    numMax = Math.max.apply(null,numArr);\r\n                    numMin = Math.min.apply(null,numArr);\r\n                    if(numMax === 0){\r\n                        numMax = 1;\r\n                    }\r\n                    $.each(backdata.items,function (i,item) {\r\n                        var vsid = item.Id,vsnum = item.TotalNumber,\r\n                            itTar = $('.wiVoteEach[data-voteid='+vsid+']');\r\n                        itTar.find('.wiVoteNum').html(vsnum);\r\n                        itTar.find('.wiBar i').css('width',((vsnum - numMin)/numMax+numMin/numMax)*100 + '%');\r\n                    });\r\n                });\r\n            });\r\n        },\r\n        getData:function () {\r\n            var that = this;\r\n            $.ajax({\r\n                dataType:'Script',\r\n                url:that.config.datafrom,\r\n                cache:false,\r\n                success:function () {\r\n                    that.insertMain(wjqData,that.config.getDt);\r\n                }\r\n            });\r\n        },\r\n        getVoteData:function(voteid,callback){\r\n            $.ajax({\r\n                type: \"GET\",\r\n                dataType: \"jsonp\",\r\n                url: \"http://db2.gamersky.com/Vote/ShowVote.aspx\",\r\n                data: {\r\n                    json: \"1\",\r\n                    id: voteid\r\n                },\r\n                success: function(responseJson) {\r\n                    switch (responseJson.status) {\r\n                        case \"ok\":\r\n                            if(typeof callback === 'function'){\r\n                                callback(responseJson);\r\n                            }\r\n                            break;\r\n                        case \"err\":\r\n                            alert(responseJson.message);\r\n                            break;\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        init:function () {\r\n            var csslink = '<link rel=\"stylesheet\" href=\"'+this.config.cssfrom+'\" >';\r\n            $('head').append(csslink);\r\n            this.getData();\r\n        }\r\n    };\r\n    $(function () {\r\n        wqj.init();\r\n    });\r\n})(jQuery);\r\n"]}